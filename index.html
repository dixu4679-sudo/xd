<div class="welcome-overlay" id="welcomeOverlay">
  <div class="welcome-card">
    <div class="welcome-tag">mini web</div>
    <div class="welcome-header">
      <div class="welcome-icon">🥗</div>
      <div class="welcome-title-block">
        <h1 id="welcomeTitle">健康饮食选择助手</h1>
        <p class="welcome-subtitle" id="welcomeSubtitle">
          简单记录你的食物查询，获得更健康的饮食建议，还可以通过小游戏学习一点营养知识。
        </p>
      </div>
    </div>

    <div class="welcome-form">
      <!-- 语言选择 (去掉韩语部分) -->
      <div>
        <div class="field-label" id="labelLang">语言 / Language</div>
        <div class="lang-pill-row">
          <button type="button" class="lang-pill active" data-lang="zh" id="langBtnZh">CN 中文</button>
        </div>
      </div>

      <!-- 昵称输入 -->
      <div>
        <div class="field-label" id="labelName">
          昵称 / 学号 <span id="labelNameHint">例如：小番茄同学、2025xxx</span>
        </div>
        <input id="welcomeNameInput" class="welcome-input"
               placeholder="请输入你的昵称或学号" />
      </div>

      <div class="welcome-btn-row">
        <button class="btn-primary" id="welcomeStartBtn">
          <span>✨</span><span id="btnStartText">进入小助手</span>
        </button>
      </div>

      <div class="welcome-tip" id="welcomeTip">
        提示：系统会用你填写的昵称记录查询行为和小游戏成绩，仅用于课堂展示。
      </div>
    </div>
  </div>
</div>

<!-- 主布局：左侧导航 + 右侧内容 -->
<div class="layout" id="mainLayout" style="opacity:0.25;pointer-events:none;">
  <aside class="sidebar">
    <div class="sidebar-header">
      <div class="sidebar-logo">🥗</div>
      <div>
        <div class="sidebar-title" id="sideTitle">健康饮食助手</div>
        <div class="sidebar-sub" id="sideSubtitle">Food · Stats · Game</div>
      </div>
    </div>

    <div class="sidebar-user">
      <div id="sideUserLine"><strong>访客</strong></div>
      <div class="sidebar-lang-indicator" id="sideLangLine">当前语言：中文</div>
    </div>

    <div class="nav-section-label" id="navSectionLabel">功能 / Features</div>
    <div class="nav-btns">
      <button class="nav-btn active" data-target="section-search" id="navSearch">
        <span class="icon">🔍</span><span id="navSearchText">食物查询</span>
      </button>
      <button class="nav-btn" data-target="section-game" id="navGame">
        <span class="icon">🎮</span><span id="navGameText">连连看小游戏</span>
      </button>
      <button class="nav-btn" data-target="section-stats" id="navStats">
        <span class="icon">📊</span><span id="navStatsText">统计与排行榜</span>
      </button>
    </div>

    <div class="nav-footer">
      <div id="navFooterText">小小网页实验 · 仅课堂展示使用。</div>
      <div class="nav-logout" id="navLogout">重新登录</div>
    </div>
  </aside>

  <main class="content">
    <!-- 顶部标题，根据当前 tab & 语言切换 -->
    <div class="content-header">
      <div class="content-title-block">
        <h2 id="contentTitle"><span>🔍</span><span id="contentTitleText">食物查询</span></h2>
        <p id="contentSubtitle">
          输入常见食物名称，查看热量与营养结构，并得到简单健康建议。
        </p>
      </div>
      <div class="chip-soft" id="contentChip">Firebase + 统计决策 mini demo</div>
    </div>

    <!-- ========== Section 1：食物查询 ========== -->
    <section class="section active" id="section-search">
      <div class="search-row">
        <input id="foodInput" class="search-input" placeholder="输入食物，如：苹果 / 牛奶 / 鸡胸肉" />
        <button class="btn-soft" id="searchBtn">搜索</button>
      </div>

      <div class="chip-row">
        <div class="food-chip" data-key="苹果">🍎 苹果</div>
        <div class="food-chip" data-key="米饭">🍚 米饭</div>
        <div class="food-chip" data-key="牛奶">🥛 牛奶</div>
        <div class="food-chip" data-key="鸡胸肉">🍗 鸡胸肉</div>
        <div class="food-chip" data-key="胡萝卜">🥕 胡萝卜</div>
        <div class="food-chip" data-key="可乐">🥤 可乐</div>
      </div>

      <div id="foodResultArea"></div>

      <div id="foodDetail" style="display:none;">
        <div class="result-grid">
          <div class="stat-box">
            <span class="stat-label" id="calorieLabel">热量</span>
            <span class="stat-value" id="calorieValue">120 kcal</span>
          </div>

          <div class="stat-box">
            <span class="stat-label" id="proteinLabel">蛋白质</span>
            <span class="stat-value" id="proteinValue">6 g</span>
          </div>

          <div class="stat-box">
            <span class="stat-label" id="fatLabel">脂肪</span>
            <span class="stat-value" id="fatValue">1.3 g</span>
          </div>

          <div class="stat-box">
            <span class="stat-label" id="carbLabel">碳水化合物</span>
            <span class="stat-value" id="carbValue">20 g</span>
          </div>
        </div>

        <div class="tips" id="healthTip" style="margin-top:10px;">
          👍 建议：水果富含维生素，可作为加餐，但要避免一次吃太多。
        </div>

        <div class="recipes">
          <h4 id="recipeTitle">推荐搭配：</h4>
          <ul id="recipeList">
            <li>🍎 苹果 + 🥛 牛奶（增强饱腹感）</li>
            <li>🍎 苹果 + 🥜 坚果（维生素 + 健康脂肪）</li>
          </ul>
        </div>
      </div>

      <div class="empty-hint" id="emptyHint" style="display:none;">未查询到该食物，请尝试其他关键词。</div>
    </section>

    <!-- ========== Section 2：连连看小游戏 ========== -->
    <section class="section" id="section-game">
      <div class="game-top-row">
        <span class="game-pill" id="gameLevelText">第 1 关 · 初阶</span>
        <span class="game-info" id="gameInfoText">点击两个相同食物即可消除 · 每关限定时间</span>
        <button class="btn-soft" id="gameHelpBtn">游戏说明</button>
        <button class="btn-game" id="gameStartBtn">开始游戏</button>
      </div>

      <div class="game-status-row">
        <span class="badge-soft" id="timerText">⏱ 60 秒</span>
        <span class="badge-soft" id="matchCountText">已消除：0 组</span>
      </div>

      <div class="game-board" id="gameBoard"></div>
    </section>

    <!-- ========== Section 3：统计与排行榜（本次会话） ========== -->
    <section class="section" id="section-stats">
      <h2 class="section-title" id="statsTitle">统计与排行榜</h2>
      <p class="section-desc" id="statsDesc">
        根据你在本次使用中的食物查询与小游戏结果，给出一些简单的统计指标，仅用于课堂展示。
      </p>

      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-label" id="statSearchLabel">累计查询次数</div>
          <div class="stat-value" id="statSearchCount">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" id="statAvgCalLabel">平均热量（查询食物）</div>
          <div class="stat-value" id="statAvgCal">0 kcal</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" id="statHealthyLabel">较健康选择次数</div>
          <div class="stat-value" id="statHealthyCount">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label" id="statWarningLabel">需要注意的食物</div>
          <div class="stat-value" id="statWarningCount">0</div>
        </div>
      </div>

      <div class="stat-subblock">
        <h3 class="sub-title" id="topFoodsTitle">本次查询中出现最多的食物 TOP 3</h3>
        <ul class="top-foods-list" id="topFoodsList">
          <li class="empty-hint">还没有数据，可以先去上方的「食物查询」玩一玩。</li>
        </ul>
      </div>
    </section>
  </main>
</div>
