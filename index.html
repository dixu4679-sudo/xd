<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¥åº·é¥®é£Ÿé€‰æ‹©åŠ©æ‰‹ Â· Healthy Food Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      /* èƒŒæ™¯ä¸ä¸»è‰²ï¼šæµ…é»„è‰² + æµ…è“è‰²æ­é… */
      --bg: #fffef5;
      --bg-soft: #f8faff;
      --card: #ffffff;

      --primary: #5d8aff;      /* ä¸»é¢˜è“ */
      --primary-soft: #e8f0ff; /* å¾ˆæ·¡çš„è“è‰²å— */

      --accent-yellow: #ffc145;      /* ç‚¹ç¼€é»„ */
      --accent-yellow-soft: #fff5e0; /* å¾ˆæ·¡çš„é»„è‰²å— */

      --accent-blue: #5d8aff;
      --accent-blue-soft: #e8f0ff;

      --danger: #ff7675;
      --success: #00b894;
      --warning: #f6a44c;

      --text-main: #2d3436;
      --text-sub: #636e72;

      --border-soft: #e3e7f0;
      --shadow-soft: 0 18px 45px rgba(170, 188, 212, 0.24);
    }

    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue",
        Arial, "Noto Sans CJK SC", "Noto Sans KR", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #fff8e5 0, #fffef5 45%, #f4f7ff 100%);
      color: var(--text-main);
    }

    .app {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 12px 32px;
    }

    /* ========== æ¬¢è¿å¼¹çª—ï¼ˆç¬¬ä¸€é¡µï¼‰ ========== */
    .welcome-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #fff8e5 0, #fffef5 50%, #ffffff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .welcome-card {
      width: 640px;
      max-width: 92vw;
      background: #ffffff;
      border-radius: 26px;
      box-shadow: var(--shadow-soft);
      padding: 26px 32px 26px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
    }

    .welcome-tag {
      position: absolute;
      top: 18px;
      right: 22px;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-yellow-soft);
      color: var(--accent-yellow);
    }

    .welcome-header {
      display: flex;
      gap: 14px;
      align-items: center;
    }

    .welcome-icon {
      width: 52px;
      height: 52px;
      border-radius: 20px;
      background: radial-gradient(circle at 30% 20%, #fff9e6 0, #ffe7a8 40%, #c5d8ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
    }

    .welcome-title-block h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
    }

    .welcome-subtitle {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .welcome-form {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .field-label {
      font-size: 13px;
      margin-bottom: 4px;
    }

    .field-label span {
      font-size: 12px;
      color: var(--text-sub);
      margin-left: 3px;
    }

    .welcome-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 9px 14px;
      font-size: 14px;
      outline: none;
      background: #fbfcff;
    }

    .welcome-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(93, 138, 255, 0.25);
      background: #ffffff;
    }

    .lang-pill-row {
      display: inline-flex;
      gap: 6px;
      padding: 4px;
      border-radius: 999px;
      background: #f7f8ff;
      border: 1px solid #ecf0ff;
    }

    .lang-pill {
      border-radius: 999px;
      border: none;
      background: transparent;
      padding: 4px 10px;
      font-size: 13px;
      cursor: pointer;
      color: var(--text-sub);
    }

    .lang-pill.active {
      background: #ffffff;
      box-shadow: 0 0 0 1px rgba(93, 138, 255, 0.7);
      color: var(--accent-blue);
      font-weight: 600;
    }

    .welcome-btn-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 4px;
    }

    .btn-primary {
      border-radius: 999px;
      border: none;
      padding: 9px 20px;
      font-size: 14px;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #fff;
      box-shadow: 0 10px 22px rgba(93, 138, 255, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary:hover {
      filter: brightness(1.03);
      transform: translateY(-1px);
    }

    .welcome-tip {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 2px;
    }

    @media (max-width: 720px) {
      .welcome-card {
        padding: 22px 18px 20px;
      }
    }

    /* ========== ä¸»å¸ƒå±€ï¼šå·¦ä¾§å¯¼èˆª + å³ä¾§å†…å®¹ ========== */
    .layout {
      margin-top: 80px; /* é¿å…æ¬¢è¿å¡ç‰‡å…³é—­å‰çœ‹åˆ° */
      display: flex;
      gap: 16px;
      min-height: 520px;
    }

    .sidebar {
      width: 230px;
      min-width: 210px;
      border-radius: 20px;
      background: linear-gradient(160deg, rgba(255, 248, 227, 0.98), rgba(240, 246, 255, 0.98));
      border: 1px solid rgba(255, 230, 184, 0.85);
      box-shadow: 0 14px 40px rgba(216, 189, 211, 0.45);
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: "";
      position: absolute;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0, rgba(255, 255, 255, 0) 70%);
      top: -40px;
      right: -30px;
      opacity: 0.7;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    .sidebar-logo {
      width: 36px;
      height: 36px;
      border-radius: 16px;
      background: radial-gradient(circle at 30% 20%, #fff, #ffe9b3 60%, #c5d8ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .sidebar-title {
      font-size: 15px;
      font-weight: 700;
    }

    .sidebar-sub {
      font-size: 11px;
      color: var(--text-sub);
    }

    .sidebar-user {
      margin-top: 6px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px dashed rgba(255, 212, 168, 0.9);
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      position: relative;
      z-index: 1;
    }

    .sidebar-user strong {
      font-size: 13px;
    }

    .sidebar-lang-indicator {
      font-size: 11px;
      color: var(--accent-blue);
    }

    .nav-section-label {
      margin-top: 4px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-sub);
      opacity: 0.9;
    }

    .nav-btns {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .nav-btn {
      border-radius: 999px;
      border: none;
      padding: 7px 11px;
      font-size: 13px;
      text-align: left;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-main);
      border: 1px solid rgba(255, 230, 184, 0.8);
    }

    .nav-btn span.icon {
      font-size: 16px;
    }

    .nav-btn.active {
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #ffffff;
      border-color: transparent;
      box-shadow: 0 10px 22px rgba(93, 138, 255, 0.55);
    }

    .nav-btn.active .icon {
      transform: translateY(-0.5px);
    }

    .nav-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--text-sub);
      opacity: 0.9;
      z-index: 1;
    }

    .nav-logout {
      margin-top: 6px;
      font-size: 11px;
      color: #ff6b81;
      cursor: pointer;
      text-decoration: underline;
    }

    /* å³ä¾§å†…å®¹åŒºåŸŸ */
    .content {
      flex: 1;
      border-radius: 24px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(227, 233, 248, 0.8);
      padding: 16px 18px 18px;
      min-width: 0;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .content-title-block h2 {
      margin: 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .content-title-block p {
      margin: 3px 0 0;
      font-size: 12px;
      color: var(--text-sub);
    }

    .chip-soft {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* ========= æŸ¥è¯¢é¡µæ ·å¼ ========= */
    .search-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .search-input {
      flex: 1;
      min-width: 180px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 8px 12px;
      font-size: 14px;
      outline: none;
      background: #fbfcff;
    }

    .search-input:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 2px rgba(93, 138, 255, 0.25);
      background: #ffffff;
    }

    .btn-soft {
      border-radius: 999px;
      border: none;
      padding: 8px 13px;
      font-size: 13px;
      cursor: pointer;
      background: #f4f6ff;
      color: var(--accent-blue);
      border: 1px solid #dfe7ff;
    }

    .btn-soft:hover {
      background: #e7ecff;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .food-chip {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 10px;
      font-size: 12px;
      color: var(--text-sub);
      background: #fafbff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .food-chip:hover {
      border-color: var(--accent-blue);
      color: var(--accent-blue);
      background: #f1f4ff;
    }

    .food-summary {
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 6px;
    }

    .stat-box {
      border-radius: 16px;
      padding: 10px 12px;
      background: #f9fbff;
      border: 1px solid #e2e8ff;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .stat-label {
      color: var(--text-sub);
      font-size: 11px;
    }

    .stat-value {
      font-weight: 600;
      font-size: 14px;
    }

    .small-badge {
      font-size: 11px;
      padding: 1px 6px;
      border-radius: 999px;
      background: #eef1ff;
      color: var(--accent-blue);
      margin-left: 4px;
    }

    .tips {
      font-size: 12px;
      line-height: 1.5;
    }

    .recipes {
      margin-top: 8px;
      font-size: 12px;
    }

    .recipes h4 {
      margin: 0 0 4px;
      font-size: 12px;
    }

    .recipes ul {
      margin: 2px 0 0;
      padding-left: 18px;
    }

    .empty-hint {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    /* ========= å°æ¸¸æˆ åŒºåŸŸ ========= */
    .game-top-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .game-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 9px;
      border-radius: 999px;
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
      font-size: 12px;
    }

    .game-info {
      font-size: 12px;
      color: var(--text-sub);
    }

    .btn-game {
      border-radius: 999px;
      border: none;
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #fff;
      box-shadow: 0 10px 20px rgba(93, 138, 255, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .game-board {
      margin-top: 10px;
      background: #fafbff;
      border-radius: 18px;
      border: 1px solid #e1e6ff;
      padding: 10px;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 6px;
      max-width: 480px;
    }

    .tile {
      aspect-ratio: 1 / 1;
      border-radius: 12px;
      background: #ffffff;
      border: 1px solid #e0e5ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
      cursor: pointer;
      box-shadow: 0 4px 10px rgba(193, 206, 255, 0.35);
      transition: transform 0.08s ease, box-shadow 0.08s ease, background 0.08s;
    }

    .tile.selected {
      border-color: var(--accent-blue);
      transform: translateY(-1px);
      box-shadow: 0 6px 14px rgba(118, 165, 255, 0.6);
      background: #f1f4ff;
    }

    .tile.matched {
      visibility: hidden;
    }

    .game-status-row {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
    }

    .badge-soft {
      padding: 2px 8px;
      border-radius: 999px;
      background: #f4f7ff;
      border: 1px solid #dde4ff;
      font-size: 11px;
    }

    /* ========= æ¸¸æˆè¯´æ˜ & é€šå…³å¼¹çª— ========= */
    .game-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.18);
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 40;
    }

    .game-modal {
      width: 360px;
      max-width: 90vw;
      background: #ffffff;
      border-radius: 22px;
      padding: 18px 20px 16px;
      box-shadow: 0 18px 40px rgba(93, 138, 255, 0.35);
    }

    .game-modal h3 {
      margin: 0 0 8px;
      font-size: 16px;
    }

    .game-modal p {
      margin: 0;
      font-size: 13px;
      color: var(--text-sub);
      line-height: 1.55;
    }

    .game-modal p ul {
      margin: 4px 0 0;
      padding-left: 18px;
    }

    .game-modal-actions {
      margin-top: 12px;
      display: flex;
      justify-content: flex-end;
      gap: 8px;
    }

    .btn-ghost {
      border-radius: 999px;
      border: 1px solid #e1e6ff;
      background: #f7f8ff;
      padding: 6px 12px;
      font-size: 12px;
      cursor: pointer;
      color: var(--text-sub);
    }

    /* ========= ç»Ÿè®¡é¡µ ========= */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 8px;
      margin-top: 6px;
      font-size: 12px;
    }

    .stat-card {
      border-radius: 16px;
      padding: 9px 11px;
      background: #f9fbff;
      border: 1px solid #e1e6ff;
    }

    .stat-card .stat-label {
      font-size: 11px;
      color: var(--text-sub);
    }

    .stat-card .stat-value {
      font-size: 14px;
      font-weight: 600;
    }

    .ranking-section {
      margin-top: 20px;
      padding: 15px;
      background: #f9fbff;
      border-radius: 16px;
      border: 1px solid #e1e6ff;
    }

    .ranking-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
      border-bottom: 1px solid #e1e6ff;
      padding-bottom: 10px;
    }

    .ranking-tab {
      border: none;
      background: none;
      padding: 6px 12px;
      font-size: 13px;
      cursor: pointer;
      color: var(--text-sub);
      border-radius: 20px;
    }

    .ranking-tab.active {
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
      font-weight: 600;
    }

    .ranking-content {
      display: none;
    }

    .ranking-content.active {
      display: block;
    }

    .ranking-list {
      list-style: none;
      padding: 0;
      margin: 10px 0 0;
      font-size: 13px;
    }

    .ranking-list li {
      display: flex;
      justify-content: space-between;
      padding: 8px 0;
      border-bottom: 1px dashed #e1e6ff;
    }

    .ranking-list li:last-child {
      border-bottom: none;
    }

    .rank-number {
      display: inline-block;
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--accent-yellow-soft);
      color: var(--accent-yellow);
      text-align: center;
      line-height: 24px;
      margin-right: 10px;
      font-weight: bold;
    }

    .my-rank-box {
      margin-top: 15px;
      padding: 12px;
      background: white;
      border-radius: 12px;
      border: 1px solid #e1e6ff;
    }

    .my-rank-box h4 {
      margin: 0 0 8px 0;
      font-size: 14px;
    }

    .my-rank-item {
      display: flex;
      justify-content: space-between;
      padding: 4px 0;
    }

    footer {
      margin-top: 16px;
      font-size: 11px;
      text-align: center;
      color: var(--text-sub);
    }

    @media (max-width: 860px) {
      .layout {
        flex-direction: column;
      }
      .sidebar {
        flex-direction: row;
        align-items: center;
        width: 100%;
        min-height: 84px;
        border-radius: 18px;
      }
      .sidebar-header {
        flex: 1;
      }
      .sidebar-user,
      .nav-section-label,
      .nav-footer {
        display: none;
      }
      .nav-btns {
        flex-direction: row;
        flex: 1;
        justify-content: flex-end;
      }
      .nav-btn {
        font-size: 12px;
        padding-inline: 10px;
      }
      .content {
        margin-top: 4px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <!-- ===== æ¬¢è¿é¡µï¼šè¯­è¨€é€‰æ‹© + ç™»å½• ===== -->
  <div class="welcome-overlay" id="welcomeOverlay">
    <div class="welcome-card">
      <div class="welcome-tag">mini web</div>
      <div class="welcome-header">
        <div class="welcome-icon">ğŸ¥—</div>
        <div class="welcome-title-block">
          <h1 id="welcomeTitle">å¥åº·é¥®é£Ÿé€‰æ‹©åŠ©æ‰‹</h1>
          <p class="welcome-subtitle" id="welcomeSubtitle">
            ç®€å•è®°å½•ä½ çš„é£Ÿç‰©æŸ¥è¯¢ï¼Œè·å¾—æ›´å¥åº·çš„é¥®é£Ÿå»ºè®®ï¼Œè¿˜å¯ä»¥é€šè¿‡å°æ¸¸æˆå­¦ä¹ ä¸€ç‚¹è¥å…»çŸ¥è¯†ã€‚
          </p>
        </div>
      </div>

      <div class="welcome-form">
        <!-- è¯­è¨€åœ¨ä¸Š -->
        <div>
          <div class="field-label" id="labelLang">è¯­è¨€ / Language</div>
          <div class="lang-pill-row">
            <button type="button" class="lang-pill active" data-lang="zh" id="langBtnZh">CN ä¸­æ–‡</button>
            <button type="button" class="lang-pill" data-lang="kr" id="langBtnKo">KR í•œêµ­ì–´</button>
          </div>
        </div>

        <!-- æ˜µç§°åœ¨ä¸‹ -->
        <div>
          <div class="field-label" id="labelName">
            æ˜µç§° / å­¦å· <span id="labelNameHint">ä¾‹å¦‚ï¼šå°ç•ªèŒ„åŒå­¦ã€2025xxx</span>
          </div>
          <input id="welcomeNameInput" class="welcome-input"
                 placeholder="è¯·è¾“å…¥ä½ çš„æ˜µç§°æˆ–å­¦å·" />
        </div>

        <div class="welcome-btn-row">
          <button class="btn-primary" id="welcomeStartBtn">
            <span>âœ¨</span><span id="btnStartText">è¿›å…¥å°åŠ©æ‰‹</span>
          </button>
        </div>

        <div class="welcome-tip" id="welcomeTip">
          æç¤ºï¼šç³»ç»Ÿä¼šç”¨ä½ å¡«å†™çš„æ˜µç§°è®°å½•æŸ¥è¯¢è¡Œä¸ºå’Œå°æ¸¸æˆæˆç»©ï¼Œä»…ç”¨äºè¯¾å ‚å±•ç¤ºã€‚
        </div>
      </div>
    </div>
  </div>

  <!-- ===== ä¸»å¸ƒå±€ï¼šå·¦ä¾§å¯¼èˆª + å³ä¾§å†…å®¹ ===== -->
  <div class="layout" id="mainLayout" style="opacity:0.25;pointer-events:none;">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">ğŸ¥—</div>
        <div>
          <div class="sidebar-title" id="sideTitle">å¥åº·é¥®é£ŸåŠ©æ‰‹</div>
          <div class="sidebar-sub" id="sideSubtitle">Food Â· Stats Â· Game</div>
        </div>
      </div>

      <div class="sidebar-user">
        <div id="sideUserLine"><strong>è®¿å®¢</strong></div>
        <div class="sidebar-lang-indicator" id="sideLangLine">å½“å‰è¯­è¨€ï¼šä¸­æ–‡</div>
      </div>

      <div class="nav-section-label" id="navSectionLabel">åŠŸèƒ½ / Features</div>
      <div class="nav-btns">
        <button class="nav-btn active" data-target="section-search" id="navSearch">
          <span class="icon">ğŸ”</span><span id="navSearchText">é£Ÿç‰©æŸ¥è¯¢</span>
        </button>
        <button class="nav-btn" data-target="section-game" id="navGame">
          <span class="icon">ğŸ®</span><span id="navGameText">å°æ¸¸æˆ</span>
        </button>
        <button class="nav-btn" data-target="section-stats" id="navStats">
          <span class="icon">ğŸ“Š</span><span id="navStatsText">ç»Ÿè®¡ä¸æ’è¡Œæ¦œ</span>
        </button>
      </div>

      <div class="nav-footer">
        <div id="navFooterText">å°å°ç½‘é¡µå®éªŒ Â· ä»…è¯¾å ‚å±•ç¤ºä½¿ç”¨ã€‚</div>
        <div class="nav-logout" id="navLogout">é‡æ–°ç™»å½• / ì–¸ì–´ ë‹¤ì‹œ ì„ íƒ</div>
      </div>
    </aside>

    <main class="content">
      <!-- é¡¶éƒ¨æ ‡é¢˜ï¼Œæ ¹æ®å½“å‰ tab & è¯­è¨€åˆ‡æ¢ -->
      <div class="content-header">
        <div class="content-title-block">
          <h2 id="contentTitle"><span>ğŸ”</span><span id="contentTitleText">é£Ÿç‰©æŸ¥è¯¢</span></h2>
          <p id="contentSubtitle">
            è¾“å…¥å¸¸è§é£Ÿç‰©åç§°ï¼ŒæŸ¥çœ‹çƒ­é‡ä¸è¥å…»ç»“æ„ï¼Œå¹¶å¾—åˆ°ç®€å•å¥åº·å»ºè®®ã€‚
          </p>
        </div>
        <div class="chip-soft" id="contentChip">Firebase + ç»Ÿè®¡å†³ç­– mini demo</div>
      </div>

      <!-- ========== Section 1ï¼šé£Ÿç‰©æŸ¥è¯¢ ========== -->
      <section class="section active" id="section-search">
        <div class="search-row">
          <input id="foodInput" class="search-input" placeholder="è¾“å…¥é£Ÿç‰©ï¼Œå¦‚ï¼šè‹¹æœ / ç‰›å¥¶ / é¸¡èƒ¸è‚‰ / æ³¡èœ / ê¹€ì¹˜" />
          <button class="btn-soft" id="searchBtn">æœç´¢</button>
        </div>

        <div class="chip-row">
          <div class="food-chip" data-key="è‹¹æœ">ğŸ è‹¹æœ</div>
          <div class="food-chip" data-key="ç±³é¥­">ğŸš ç±³é¥­</div>
          <div class="food-chip" data-key="ç‰›å¥¶">ğŸ¥› ç‰›å¥¶</div>
          <div class="food-chip" data-key="é¸¡èƒ¸è‚‰">ğŸ— é¸¡èƒ¸è‚‰</div>
          <div class="food-chip" data-key="èƒ¡èåœ">ğŸ¥• èƒ¡èåœ</div>
          <div class="food-chip" data-key="å¯ä¹">ğŸ¥¤ å¯ä¹</div>
        </div>

        <div id="foodResultArea"></div>

        <div id="foodDetail" style="display:none;">
          <div class="result-grid">
            <div class="stat-box">
              <span class="stat-label" id="calorieLabel">çƒ­é‡</span>
              <span class="stat-value" id="calorieValue">120 kcal</span>
            </div>

            <div class="stat-box">
              <span class="stat-label" id="proteinLabel">è›‹ç™½è´¨</span>
              <span class="stat-value" id="proteinValue">6 g</span>
            </div>

            <div class="stat-box">
              <span class="stat-label" id="fatLabel">è„‚è‚ª</span>
              <span class="stat-value" id="fatValue">1.3 g</span>
            </div>

            <div class="stat-box">
              <span class="stat-label" id="carbLabel">ç¢³æ°´åŒ–åˆç‰©</span>
              <span class="stat-value" id="carbValue">20 g</span>
            </div>
          </div>

          <div class="tips" id="healthTip" style="margin-top:10px;">
            ğŸ‘ å»ºè®®ï¼šæ°´æœå¯Œå«ç»´ç”Ÿç´ ï¼Œå¯ä½œä¸ºåŠ é¤ï¼Œä½†è¦é¿å…ä¸€æ¬¡åƒå¤ªå¤šã€‚
          </div>

          <div class="recipes">
            <h4 id="recipeTitle">æ¨èæ­é…ï¼š</h4>
            <ul id="recipeList">
              <li>ğŸ è‹¹æœ + ğŸ¥› ç‰›å¥¶ï¼ˆå¢å¼ºé¥±è…¹æ„Ÿï¼‰</li>
              <li>ğŸ è‹¹æœ + ğŸ¥œ åšæœï¼ˆç»´ç”Ÿç´  + å¥åº·è„‚è‚ªï¼‰</li>
            </ul>
          </div>
        </div>

        <div class="empty-hint" id="emptyHint" style="display:none;">æœªæŸ¥è¯¢åˆ°è¯¥é£Ÿç‰©ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚</div>
      </section>

      <!-- ========== Section 2ï¼šå°æ¸¸æˆ ========== -->
      <section class="section" id="section-game">
        <div class="game-top-row">
          <span class="game-pill" id="gameLevelText">ç¬¬ 1 å…³ Â· åˆé˜¶</span>
          <span class="game-info" id="gameInfoText">ç‚¹å‡»ä¸¤ä¸ªç›¸åŒé£Ÿç‰©å³å¯æ¶ˆé™¤ Â· ç‚¹é”™æ‰£ 3 ç§’</span>
          <button class="btn-soft" id="gameHelpBtn">æ¸¸æˆè¯´æ˜</button>
          <button class="btn-game" id="gameStartBtn">å¼€å§‹æ¸¸æˆ</button>
        </div>

        <div class="game-status-row">
          <span class="badge-soft" id="timerText">â± 60 ç§’</span>
          <span class="badge-soft" id="matchCountText">å·²æ¶ˆé™¤ï¼š0 ç»„</span>
        </div>

        <div class="game-board" id="gameBoard"></div>
      </section>

      <!-- ========== Section 3ï¼šç»Ÿè®¡ä¸æ’è¡Œæ¦œ ========== -->
      <section class="section" id="section-stats">
        <h2 class="section-title" id="statsTitle">ç»Ÿè®¡ä¸æ’è¡Œæ¦œ</h2>
        <p class="section-desc" id="statsDesc">
          æ ¹æ®ä½ åœ¨æœ¬æ¬¡ä½¿ç”¨ä¸­çš„é£Ÿç‰©æŸ¥è¯¢ç»“æœï¼Œç»™å‡ºç»Ÿè®¡æŒ‡æ ‡å’Œæ’è¡Œæ¦œã€‚
        </p>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label" id="statSearchLabel">ç´¯è®¡æŸ¥è¯¢æ¬¡æ•°</div>
            <div class="stat-value" id="statSearchCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="statAvgCalLabel">å¹³å‡çƒ­é‡ï¼ˆæŸ¥è¯¢é£Ÿç‰©ï¼‰</div>
            <div class="stat-value" id="statAvgCal">0 kcal</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="statHealthyLabel">å¥åº·é£Ÿç‰©æŸ¥è¯¢</div>
            <div class="stat-value" id="statHealthyCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label" id="statWarningLabel">é«˜çƒ­é‡é£Ÿç‰©æŸ¥è¯¢</div>
            <div class="stat-value" id="statWarningCount">0</div>
          </div>
        </div>

        <!-- æ’è¡Œæ¦œåŒºåŸŸ -->
        <div class="ranking-section">
          <div class="ranking-tabs">
            <button class="ranking-tab active" data-ranking="food" id="foodRankingTab">é£Ÿå“æœç´¢æ’è¡Œæ¦œ</button>
            <button class="ranking-tab" data-ranking="game" id="gameRankingTab">å°æ¸¸æˆæ’è¡Œæ¦œ</button>
          </div>
          
          <!-- é£Ÿå“æœç´¢æ’è¡Œæ¦œ -->
          <div class="ranking-content active" id="foodRanking">
            <h4 style="margin: 0 0 10px 0; font-size: 14px; color: var(--text-main);" id="foodRankingTitle">æœ€å¸¸æœç´¢çš„é£Ÿç‰© TOP 10</h4>
            <ul class="ranking-list" id="foodRankingList">
              <li class="empty-hint">è¿˜æ²¡æœ‰æœç´¢æ•°æ®</li>
            </ul>
          </div>
          
          <!-- å°æ¸¸æˆæ’è¡Œæ¦œ -->
          <div class="ranking-content" id="gameRanking">
            <h4 style="margin: 0 0 10px 0; font-size: 14px; color: var(--text-main);" id="gameRankingTitle">å°æ¸¸æˆæœ€é«˜åˆ† TOP 10</h4>
            <ul class="ranking-list" id="gameRankingList">
              <li class="empty-hint">è¿˜æ²¡æœ‰æ¸¸æˆæ•°æ®</li>
            </ul>
          </div>
          
          <!-- æˆ‘çš„æ’å -->
          <div class="my-rank-box">
            <h4 id="myRankingTitle">æˆ‘çš„æ’å</h4>
            <div class="my-rank-item">
              <span id="foodRankingText">é£Ÿå“æœç´¢æ’åï¼š</span>
              <span id="myFoodRank" style="color: var(--accent-blue); font-weight: 600;">æš‚æ— </span>
            </div>
            <div class="my-rank-item">
              <span id="gameRankingText">å°æ¸¸æˆæ’åï¼š</span>
              <span id="myGameRank" style="color: var(--accent-blue); font-weight: 600;">æš‚æ— </span>
            </div>
          </div>
        </div>
      </section>

    </main>
  </div> <!-- /main-layout -->
</div>   <!-- /app-wrapper -->

<!-- æ¸¸æˆè¯´æ˜ / é€šå…³å¼¹çª— -->
<div class="game-modal-overlay" id="gameModal">
  <div class="game-modal">
    <h3 id="gameModalTitle">å°æ¸¸æˆè¯´æ˜</h3>
    <p id="gameModalBody">
      ...
    </p>
    <div class="game-modal-actions">
      <button class="btn-ghost" id="gameModalSecondaryBtn">ç¨åå†çœ‹</button>
      <button class="btn-game" id="gameModalPrimaryBtn">å¼€å§‹ç¬¬ 1 å…³</button>
    </div>
  </div>
</div>

<!-- è½»é‡æç¤ºå¼¹çª—ï¼šç”¨äºå±•ç¤ºè¥å…»æç¤º / æ‰£æ—¶æç¤º -->
<div id="toast"
     style="position:fixed;left:50%;bottom:32px;transform:translateX(-50%) translateY(16px);
            background:rgba(255,255,255,0.97);color:#2d3436;padding:8px 16px;border-radius:999px;
            font-size:12px;opacity:0;pointer-events:none;transition:opacity .25s,transform .25s;
            z-index:50;border:1px solid #e3e7ff;box-shadow:0 10px 30px rgba(93,138,255,0.25);">
</div>

<script>
(function () {
  'use strict';

  /* ===================== åŸºç¡€å¤šè¯­è¨€æ–‡æœ¬ ===================== */
  const TEXTS = {
    zh: {
      /* æ¬¢è¿é¡µ */
      welcomeTitle: 'å¥åº·é¥®é£Ÿé€‰æ‹©åŠ©æ‰‹',
      welcomeSubtitle: 'ç®€å•è®°å½•ä½ çš„é£Ÿç‰©æŸ¥è¯¢ï¼Œè·å¾—æ›´å¥åº·çš„é¥®é£Ÿå»ºè®®ï¼Œè¿˜å¯ä»¥é€šè¿‡å°æ¸¸æˆå­¦ä¹ ä¸€ç‚¹è¥å…»çŸ¥è¯†ã€‚',
      labelLang: 'è¯­è¨€ / Language',
      labelName: 'æ˜µç§° / å­¦å·',
      labelNameHint: 'ä¾‹å¦‚ï¼šå°ç•ªèŒ„åŒå­¦ã€2025xxx',
      welcomeInputPlaceholder: 'è¯·è¾“å…¥ä½ çš„æ˜µç§°æˆ–å­¦å·',
      btnStartText: 'è¿›å…¥å°åŠ©æ‰‹',
      welcomeTip: 'æç¤ºï¼šç³»ç»Ÿä¼šç”¨ä½ å¡«å†™çš„æ˜µç§°è®°å½•æŸ¥è¯¢è¡Œä¸ºå’Œå°æ¸¸æˆæˆç»©ï¼Œä»…ç”¨äºè¯¾å ‚å±•ç¤ºã€‚',

      /* ä¾§è¾¹æ  & é¡¶éƒ¨ */
      sideTitle: 'å¥åº·é¥®é£ŸåŠ©æ‰‹',
      sideSubtitle: 'Food Â· Stats Â· Game',
      sideLangText: 'å½“å‰è¯­è¨€ï¼šä¸­æ–‡',
      navSectionLabel: 'åŠŸèƒ½ / Features',
      navFooterText: 'å°å°ç½‘é¡µå®éªŒ Â· ä»…è¯¾å ‚å±•ç¤ºä½¿ç”¨ã€‚',
      navLogout: 'é‡æ–°ç™»å½• / ì–¸ì–´ ë‹¤ì‹œé€‰æ‹©',

      navSearch: 'é£Ÿç‰©æŸ¥è¯¢',
      navGame: 'å°æ¸¸æˆ',
      navStats: 'ç»Ÿè®¡ä¸æ’è¡Œæ¦œ',

      /* é¡¶éƒ¨æ¯ä¸ª section æ ‡é¢˜å’Œè¯´æ˜ */
      searchTitle: 'é£Ÿç‰©æŸ¥è¯¢',
      searchDesc: 'è¾“å…¥å¸¸è§é£Ÿç‰©åç§°ï¼ŒæŸ¥çœ‹çƒ­é‡ä¸è¥å…»ç»“æ„ï¼Œå¹¶å¾—åˆ°ç®€å•å¥åº·å»ºè®®ã€‚',
      gameTitle: 'å°æ¸¸æˆ',
      gameDesc: 'é€šè¿‡ç®€åŒ–ç‰ˆè¿è¿çœ‹å°æ¸¸æˆï¼Œé¡ºä¾¿è®°ä½ä¸€äº›åŸºç¡€çš„è¥å…»çŸ¥è¯†ã€‚',
      statsTitle: 'ç»Ÿè®¡ä¸æ’è¡Œæ¦œ',
      statsDesc: 'æ ¹æ®ä½ åœ¨æœ¬æ¬¡ä½¿ç”¨ä¸­çš„é£Ÿç‰©æŸ¥è¯¢ç»“æœï¼Œç»™å‡ºç»Ÿè®¡æŒ‡æ ‡å’Œæ’è¡Œæ¦œã€‚',

      /* æŸ¥è¯¢é¡µ */
      searchPlaceholder: 'è¾“å…¥é£Ÿç‰©ï¼Œå¦‚ï¼šè‹¹æœ / ç‰›å¥¶ / é¸¡èƒ¸è‚‰ / æ³¡èœ / ê¹€ì¹˜',
      searchBtn: 'æœç´¢',
      calorieLabel: 'çƒ­é‡',
      proteinLabel: 'è›‹ç™½è´¨',
      fatLabel: 'è„‚è‚ª',
      carbLabel: 'ç¢³æ°´åŒ–åˆç‰©',
      statSearchLabel: 'ç´¯è®¡æŸ¥è¯¢æ¬¡æ•°',
      statAvgCalLabel: 'å¹³å‡çƒ­é‡ï¼ˆæŸ¥è¯¢é£Ÿç‰©ï¼‰',
      statHealthyLabel: 'å¥åº·é£Ÿç‰©æŸ¥è¯¢',
      statWarningLabel: 'é«˜çƒ­é‡é£Ÿç‰©æŸ¥è¯¢',
      
      /* æ’è¡Œæ¦œç›¸å…³ */
      foodRankingTab: 'é£Ÿå“æœç´¢æ’è¡Œæ¦œ',
      gameRankingTab: 'å°æ¸¸æˆæ’è¡Œæ¦œ',
      foodRankingTitle: 'æœ€å¸¸æœç´¢çš„é£Ÿç‰© TOP 10',
      gameRankingTitle: 'å°æ¸¸æˆæœ€é«˜åˆ† TOP 10',
      myRankingTitle: 'æˆ‘çš„æ’å',
      foodRankingText: 'é£Ÿå“æœç´¢æ’åï¼š',
      gameRankingText: 'å°æ¸¸æˆæ’åï¼š',
      noRankingData: 'æš‚æ— æ•°æ®',
      
      recipeTitle: 'æ¨èæ­é…ï¼š',
      emptyHint: 'æœªæŸ¥è¯¢åˆ°è¯¥é£Ÿç‰©ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚',

      /* æ¸¸æˆé¡µ */
      gameLevel1: 'ç¬¬ 1 å…³ Â· åˆé˜¶',
      gameLevel2: 'ç¬¬ 2 å…³ Â· è¿›é˜¶',
      gameInfo: 'ç‚¹å‡»ä¸¤ä¸ªç›¸åŒé£Ÿç‰©å³å¯æ¶ˆé™¤ Â· ç‚¹é”™æ‰£ 3 ç§’',
      gameStart: 'å¼€å§‹æ¸¸æˆ',
      gameHelp: 'æ¸¸æˆè¯´æ˜',
      timerPrefix: 'â± ',
      timerSuffix: ' ç§’',
      matchPrefix: 'å·²æ¶ˆé™¤ï¼š',
      matchSuffix: ' ç»„',

      /* å¼¹çª— & æœºå…³ */
      gameIntroTitle: 'æ€ä¹ˆç©ï¼Ÿ',
      gameIntroBody:
        '<ul>' +
        '<li>ç‚¹å‡»ã€Œå¼€å§‹æ¸¸æˆã€åï¼Œä¼šå‡ºç° 24 å¼ éšæœºæ’åˆ—çš„é£Ÿç‰©å¡ç‰‡ã€‚</li>' +
        '<li>é€‰æ‹©<strong>ä¸¤ä¸ªç›¸åŒ</strong>çš„é£Ÿç‰©å›¾æ ‡å³å¯æ¶ˆé™¤ä¸€å¯¹ã€‚</li>' +
        '<li>å¦‚æœé€‰é”™äº†ï¼Œä¼šæ‰£ <strong>3 ç§’</strong> æ¸¸æˆæ—¶é—´ã€‚</li>' +
        '<li>ç¬¬ 1 å…³æœ‰ 60 ç§’ï¼Œç¬¬ 2 å…³åªæœ‰ 45 ç§’ï¼Œæ›´è€ƒéªŒé€Ÿåº¦å’Œè§‚å¯ŸåŠ›ã€‚</li>' +
        '</ul>',
      introPrimary: 'å¼€å§‹ç¬¬ 1 å…³',
      introSecondary: 'ç¨åå†çœ‹',

      wrongPenalty: 'é…å¯¹å¤±è´¥ï¼Œæœ¬æ¬¡æ‰£3ç§’ï¼Œè¯·é€‰æ‹©ä¸¤ä¸ªç›¸åŒçš„é£Ÿç‰©ï½',

      levelClearTitle: 'ç¬¬ 1 å…³å®Œæˆï¼',
      levelClearBody: 'ä½ å·²ç»æˆåŠŸé…å¯¹å®Œæœ¬å…³æ‰€æœ‰é£Ÿç‰©ï¼Œæ¥ä¸‹æ¥å¯ä»¥æŒ‘æˆ˜ç¬¬ 2 å…³ï¼šæ—¶é—´æ›´çŸ­ï¼ŒèŠ‚å¥æ›´å¿«ã€‚',
      levelClearPrimary: 'è¿›å…¥ç¬¬ 2 å…³',
      levelClearSecondary: 'ç¨åå†å»',

      allClearTitle: 'æ­å–œé€šå…³ï¼',
      allClearBody: 'ä½ å·²ç»å®Œæˆæ‰€æœ‰å…³å¡ï¼Œå¯ä»¥åœ¨ç»Ÿè®¡é¡µé¢çœ‹çœ‹è‡ªå·±çš„è¡¨ç°ï¼Œæˆ–è€…é‡æ–°ä»ç¬¬ 1 å…³å¼€å§‹æŒ‘æˆ˜ã€‚',
      allClearPrimary: 'å¥½çš„',
      allClearSecondary: 'å…³é—­',

      /* å•ä½ */
      kcal: 'kcal',
      grams: 'g',
      points: 'åˆ†',
      times: 'æ¬¡',
      loading: 'åŠ è½½ä¸­...'
    },
    kr: {
      /* æ¬¢è¿é¡µ */
      welcomeTitle: 'ê±´ê°• ì‹ë‹¨ ì„ íƒ ë„ìš°ë¯¸',
      welcomeSubtitle: 'ìì£¼ ë¨¹ëŠ” ìŒì‹ì„ ê°€ë³ê²Œ ì¡°íšŒí•˜ê³ , ë” ê±´ê°•í•œ ì„ íƒì„ ë„ì™€ì£¼ëŠ” ë¯¸ë‹ˆ ì›¹ì…ë‹ˆë‹¤. ê²Œì„ì„ í•˜ë©´ì„œ ì˜ì–‘ ì§€ì‹ë„ ë°°ì›Œ ë³´ì„¸ìš”.',
      labelLang: 'ì–¸ì–´ / Language',
      labelName: 'ë‹‰ë„¤ì„ / í•™ë²ˆ',
      labelNameHint: 'ì˜ˆ: ì‘ì€í† ë§ˆí† , 2025xxx',
      welcomeInputPlaceholder: 'ë‹‰ë„¤ì„ ë˜ëŠ” í•™ë²ˆì„ ì…ë ¥í•˜ì„¸ìš”',
      btnStartText: 'ì‹œì‘í•˜ê¸°',
      welcomeTip: 'ì•ˆë‚´: ì…ë ¥í•œ ë‹‰ë„¤ì„ì€ ìˆ˜ì—… ì‹œê°„ ì˜ˆì‹œ(ì¡°íšŒ ê¸°ë¡, ê²Œì„ ê²°ê³¼)ì—ë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤.',

      /* ä¾§è¾¹æ  & é¡¶éƒ¨ */
      sideTitle: 'ê±´ê°• ì‹ë‹¨ ë„ìš°ë¯¸',
      sideSubtitle: 'Food Â· Stats Â· Game',
      sideLangText: 'í˜„ì¬ ì–¸ì–´: í•œêµ­ì–´',
      navSectionLabel: 'ê¸°ëŠ¥ / Features',
      navFooterText: 'ìˆ˜ì—…ìš© ë¯¸ë‹ˆ ì›¹ ì˜ˆì‹œì…ë‹ˆë‹¤.',
      navLogout: 'ë‹¤ì‹œ ë¡œê·¸ì¸ / ì–¸ì–´ ë³€ê²½',

      navSearch: 'ì‹í’ˆ ì¡°íšŒ',
      navGame: 'ë¯¸ë‹ˆ ê²Œì„',
      navStats: 'í†µê³„ Â· ë­í‚¹',

      /* é¡¶éƒ¨æ¯ä¸ª section æ ‡é¢˜å’Œè¯´æ˜ */
      searchTitle: 'ì‹í’ˆ ì¡°íšŒ',
      searchDesc: 'ìì£¼ ë¨¹ëŠ” ì‹í’ˆ ì´ë¦„ì„ ì…ë ¥í•˜ê³  ì¹¼ë¡œë¦¬ì™€ ì˜ì–‘ ì •ë³´ë¥¼ ê°„ë‹¨íˆ í™•ì¸í•´ ë³´ì„¸ìš”.',
      gameTitle: 'ë¯¸ë‹ˆ ë§¤ì¹­ ê²Œì„',
      gameDesc: 'ê°™ì€ ìŒì‹ ì•„ì´ì½˜ì„ ì—°ê²°í•˜ëŠ” ê°„ë‹¨í•œ ê²Œì„ìœ¼ë¡œ ì˜ì–‘ ì •ë³´ë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ìµí˜€ ë³´ì„¸ìš”.',
      statsTitle: 'í†µê³„ì™€ ìˆœìœ„',
      statsDesc: 'ì´ë²ˆ ì‚¬ìš© ë™ì•ˆì˜ ì¡°íšŒ ê¸°ë¡ì„ ë°”íƒ•ìœ¼ë¡œ ê°„ë‹¨í•œ ì§€í‘œì™€ ìˆœìœ„ë¥¼ ë³´ì—¬ì£¼ëŠ” í˜ì´ì§€ì…ë‹ˆë‹¤.',

      /* æŸ¥è¯¢é¡µ */
      searchPlaceholder: 'ì‚¬ê³¼ / ìš°ìœ  / ë‹­ê°€ìŠ´ì‚´ / ê¹€ì¹˜ ë“± ì‹í’ˆì„ ì…ë ¥í•˜ì„¸ìš”',
      searchBtn: 'ê²€ìƒ‰',
      calorieLabel: 'ì¹¼ë¡œë¦¬',
      proteinLabel: 'ë‹¨ë°±ì§ˆ',
      fatLabel: 'ì§€ë°©',
      carbLabel: 'íƒ„ìˆ˜í™”ë¬¼',
      statSearchLabel: 'ì´ ì¡°íšŒ íšŸìˆ˜',
      statAvgCalLabel: 'ì¡°íšŒí•œ ì‹í’ˆì˜ í‰ê·  ì¹¼ë¡œë¦¬',
      statHealthyLabel: 'ê±´ê°•í•œ ì‹í’ˆ ì¡°íšŒ',
      statWarningLabel: 'ê³ ì¹¼ë¡œë¦¬ ì‹í’ˆ ì¡°íšŒ',
      
      /* æ’è¡Œæ¦œç›¸å…³ */
      foodRankingTab: 'ì‹í’ˆ ì¡°íšŒ ìˆœìœ„',
      gameRankingTab: 'ê²Œì„ ìˆœìœ„',
      foodRankingTitle: 'ê°€ì¥ ìì£¼ ì¡°íšŒëœ ì‹í’ˆ TOP 10',
      gameRankingTitle: 'ë¯¸ë‹ˆ ê²Œì„ ìµœê³ ì  TOP 10',
      myRankingTitle: 'ë‚˜ì˜ ìˆœìœ„',
      foodRankingText: 'ì‹í’ˆ ì¡°íšŒ ìˆœìœ„:',
      gameRankingText: 'ê²Œì„ ìˆœìœ„:',
      noRankingData: 'ë°ì´í„° ì—†ìŒ',
      
      recipeTitle: 'ì¶”ì²œ ì¡°í•©:',
      emptyHint: 'í•´ë‹¹ ì‹í’ˆì„ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. ë‹¤ë¥¸ ì´ë¦„ìœ¼ë¡œ ì‹œë„í•´ ë³´ì„¸ìš”.',

      /* æ¸¸æˆé¡µ */
      gameLevel1: '1ë‹¨ê³„ Â· ê¸°ì´ˆ',
      gameLevel2: '2ë‹¨ê³„ Â· ì‘ìš©',
      gameInfo: 'ê°™ì€ ìŒì‹ ë‘ ê°œë¥¼ ì„ íƒí•˜ë©´ ì§€ì›Œì§‘ë‹ˆë‹¤. í‹€ë¦¬ë©´ 3ì´ˆ ê°ì†Œ!',
      gameStart: 'ê²Œì„ ì‹œì‘',
      gameHelp: 'ê²Œì„ ì„¤ëª…',
      timerPrefix: 'â± ',
      timerSuffix: ' ì´ˆ',
      matchPrefix: 'ì œê±°í•œ ìŒ: ',
      matchSuffix: ' ê°œ',

      /* å¼¹çª— & æœºå…³ */
      gameIntroTitle: 'ê²Œì„ ë°©ë²•',
      gameIntroBody:
        '<ul>' +
        '<li>ã€Œê²Œì„ ì‹œì‘ã€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìŒì‹ ì¹´ë“œ 24ì¥ì´ ëœë¤ìœ¼ë¡œ ë°°ì¹˜ë©ë‹ˆë‹¤.</li>' +
        '<li>ê°™ì€ ì•„ì´ì½˜ ë‘ ê°œë¥¼ ì„ íƒí•˜ë©´ í•œ ìŒì´ ì œê±°ë©ë‹ˆë‹¤.</li>' +
        '<li>í‹€ë¦¬ê²Œ ì„ íƒí•˜ë©´ <strong>3ì´ˆ</strong>ì˜ ì‹œê°„ì´ ì¤„ì–´ë“­ë‹ˆë‹¤.</li>' +
        '<li>1ë‹¨ê³„ëŠ” 60ì´ˆ, 2ë‹¨ê³„ëŠ” 45ì´ˆë¡œ ì‹œê°„ì´ ë” ì§§ì•„ì§‘ë‹ˆë‹¤.</li>' +
        '</ul>',
      introPrimary: '1ë‹¨ê³„ ì‹œì‘',
      introSecondary: 'ë‚˜ì¤‘ì—',

      wrongPenalty: 'ì˜ëª» ì„ íƒí•´ì„œ 3ì´ˆê°€ ì¤„ì—ˆìŠµë‹ˆë‹¤. ê°™ì€ ìŒì‹ ë‘ ê°œë¥¼ ì„ íƒí•˜ì„¸ìš”!',

      levelClearTitle: '1ë‹¨ê³„ í´ë¦¬ì–´!',
      levelClearBody: 'ëª¨ë“  ì¹´ë“œë¥¼ ì œê±°í–ˆìŠµë‹ˆë‹¤. ì´ì œ ì‹œê°„ì´ ë” ì§§ì€ 2ë‹¨ê³„ë¥¼ ë„ì „í•´ ë³¼ê¹Œìš”?',
      levelClearPrimary: '2ë‹¨ê³„ë¡œ ì´ë™',
      levelClearSecondary: 'ë‚˜ì¤‘ì—',

      allClearTitle: 'ëª¨ë“  ë‹¨ê³„ ì™„ë£Œ!',
      allClearBody: 'ëª¨ë“  ë‹¨ê³„ë¥¼ í´ë¦¬ì–´í–ˆìŠµë‹ˆë‹¤. í†µê³„ í˜ì´ì§€ë¥¼ ë³´ê±°ë‚˜ 1ë‹¨ê³„ë¶€í„° ë‹¤ì‹œ ë„ì „í•´ ë³´ì„¸ìš”.',
      allClearPrimary: 'í™•ì¸',
      allClearSecondary: 'ë‹«ê¸°',

      /* å•ä½ */
      kcal: 'kcal',
      grams: 'g',
      points: 'ì ',
      times: 'íšŒ',
      loading: 'ë¡œë”© ì¤‘...'
    }
  };

  let currentLang = 'zh';
  let currentSection = 'section-search';

  /* ===================== DOM å¼•ç”¨ ===================== */

  // æ¬¢è¿é¡µ
  const langZhBtn = document.getElementById('langBtnZh');
  const langKrBtn = document.getElementById('langBtnKo');
  const startBtn  = document.getElementById('welcomeStartBtn');
  const nameInput = document.getElementById('welcomeNameInput');
  const welcomePanel = document.getElementById('welcomeOverlay');
  const mainLayout   = document.getElementById('mainLayout');

  const welcomeTitleEl   = document.getElementById('welcomeTitle');
  const welcomeSubtitleEl= document.getElementById('welcomeSubtitle');
  const labelLangEl      = document.getElementById('labelLang');
  const labelNameEl      = document.getElementById('labelName');
  const labelNameHintEl  = document.getElementById('labelNameHint');
  const btnStartTextEl   = document.getElementById('btnStartText');
  const welcomeTipEl     = document.getElementById('welcomeTip');

  // ä¾§è¾¹æ  & é¡¶éƒ¨
  const sideTitleEl   = document.getElementById('sideTitle');
  const sideSubtitleEl= document.getElementById('sideSubtitle');
  const sideLangLine  = document.getElementById('sideLangLine');
  const navSectionLabelEl = document.getElementById('navSectionLabel');
  const navFooterTextEl   = document.getElementById('navFooterText');
  const navLogoutEl       = document.getElementById('navLogout');

  const navSearch = document.getElementById('navSearchText');
  const navGame   = document.getElementById('navGameText');
  const navStats  = document.getElementById('navStatsText');

  const sections  = document.querySelectorAll('.section');

  const contentTitle   = document.getElementById('contentTitle');
  const contentTitleText = document.getElementById('contentTitleText');
  const contentSubtitle= document.getElementById('contentSubtitle');

  // æŸ¥è¯¢é¡µ
  const foodInput = document.getElementById('foodInput');
  const searchBtn = document.getElementById('searchBtn');
  const chips     = document.querySelectorAll('.food-chip');

  const foodResultArea = document.getElementById('foodResultArea');
  const foodDetail     = document.getElementById('foodDetail');
  const emptyHintEl    = document.getElementById('emptyHint');

  const calorieValue = document.getElementById('calorieValue');
  const proteinValue = document.getElementById('proteinValue');
  const fatValue     = document.getElementById('fatValue');
  const carbValue    = document.getElementById('carbValue');
  const healthTipEl  = document.getElementById('healthTip');
  const recipeTitle  = document.getElementById('recipeTitle');
  const recipeList   = document.getElementById('recipeList');

  // ç»Ÿè®¡é¡µ
  const statsTitleEl       = document.getElementById('statsTitle');
  const statsDescEl        = document.getElementById('statsDesc');
  const statSearchLabelEl  = document.getElementById('statSearchLabel');
  const statAvgCalLabelEl  = document.getElementById('statAvgCalLabel');
  const statHealthyLabelEl = document.getElementById('statHealthyLabel');
  const statWarningLabelEl = document.getElementById('statWarningLabel');
  const statSearchCountEl  = document.getElementById('statSearchCount');
  const statAvgCalEl       = document.getElementById('statAvgCal');
  const statHealthyCountEl = document.getElementById('statHealthyCount');
  const statWarningCountEl = document.getElementById('statWarningCount');
  
  // æ’è¡Œæ¦œå…ƒç´ 
  const foodRankingList = document.getElementById('foodRankingList');
  const gameRankingList = document.getElementById('gameRankingList');
  const myFoodRankEl = document.getElementById('myFoodRank');
  const myGameRankEl = document.getElementById('myGameRank');
  const foodRankingTitle = document.getElementById('foodRankingTitle');
  const gameRankingTitle = document.getElementById('gameRankingTitle');
  const myRankingTitle = document.getElementById('myRankingTitle');
  const foodRankingText = document.getElementById('foodRankingText');
  const gameRankingText = document.getElementById('gameRankingText');
  const foodRankingTab = document.getElementById('foodRankingTab');
  const gameRankingTab = document.getElementById('gameRankingTab');
  
  const rankingTabs = document.querySelectorAll('.ranking-tab');
  const rankingContents = document.querySelectorAll('.ranking-content');

  // æ¸¸æˆç›¸å…³
  const gameLevelText  = document.getElementById('gameLevelText');
  const gameInfoText   = document.getElementById('gameInfoText');
  const gameHelpBtn    = document.getElementById('gameHelpBtn');
  const gameStartBtn   = document.getElementById('gameStartBtn');
  const timerTextEl    = document.getElementById('timerText');
  const matchCountText = document.getElementById('matchCountText');
  const gameBoard      = document.getElementById('gameBoard');

  // æ¸¸æˆå¼¹çª—
  const gameModal            = document.getElementById('gameModal');
  const gameModalTitle       = document.getElementById('gameModalTitle');
  const gameModalBody        = document.getElementById('gameModalBody');
  const gameModalPrimaryBtn  = document.getElementById('gameModalPrimaryBtn');
  const gameModalSecondaryBtn= document.getElementById('gameModalSecondaryBtn');

  const toastEl = document.getElementById('toast');

  /* ===================== è½»é‡ Toast ===================== */
  function showToast (text) {
    if (!toastEl) return;
    toastEl.textContent = text;
    toastEl.style.opacity = '1';
    toastEl.style.transform = 'translateX(-50%) translateY(0)';
    setTimeout(() => {
      toastEl.style.opacity = '0';
      toastEl.style.transform = 'translateX(-50%) translateY(16px)';
    }, 2200);
  }

  /* ===================== å®Œæ•´é£Ÿç‰©æ•°æ®åº“ (36ç§) - æ·»åŠ æ­é…æ¨è ===================== */
  const FOOD_ITEMS = [
    // åŸæœ‰çš„6ç§å¸¸è§é£Ÿç‰©
    {
      id: 'apple',
      icon: 'ğŸ',
      keywords: ['è‹¹æœ', 'ì‚¬ê³¼', 'apple'],
      kcal: 52,
      protein: 0.3,
      fat: 0.2,
      carb: 14,
      level: 'good',
      zh: { 
        name: 'è‹¹æœ', 
        tip: 'å¯Œå«ç»´ç”Ÿç´  C å’Œè†³é£Ÿçº¤ç»´ï¼Œå¯ä½œä¸ºåŠ é¤æˆ–æ—©é¤é…é¤ã€‚', 
        recipes: [
          'ğŸ è‹¹æœ + ğŸ¥› ç‰›å¥¶ï¼ˆç»´ç”Ÿç´ Cä¸é’™è´¨æ­é…ï¼‰',
          'ğŸ è‹¹æœ + ğŸ¥œ åšæœï¼ˆè†³é£Ÿçº¤ç»´ä¸å¥åº·è„‚è‚ªï¼‰',
          'ğŸ è‹¹æœ + ğŸš ç±³é¥­ï¼ˆå¹³è¡¡è†³é£Ÿçº¤ç»´ä¸ç¢³æ°´åŒ–åˆç‰©ï¼‰'
        ], 
        gameTip: 'å¯Œå«ç»´ç”Ÿç´ Cå’Œçº¤ç»´ï¼Œæœ‰åŠ©äºå¢å¼ºå…ç–«åŠ›ã€‚' 
      },
      kr: { 
        name: 'ì‚¬ê³¼', 
        tip: 'ë¹„íƒ€ë¯¼ Cì™€ ì‹ì´ì„¬ìœ ê°€ í’ë¶€í•©ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ ì‚¬ê³¼ + ğŸ¥› ìš°ìœ ï¼ˆë¹„íƒ€ë¯¼Cì™€ ì¹¼ìŠ˜ ì¡°í•©ï¼‰',
          'ğŸ ì‚¬ê³¼ + ğŸ¥œ ê²¬ê³¼ë¥˜ï¼ˆì‹ì´ì„¬ìœ ì™€ ê±´ê°•í•œ ì§€ë°©ï¼‰',
          'ğŸ ì‚¬ê³¼ + ğŸš ë°¥ï¼ˆì‹ì´ì„¬ìœ ì™€ íƒ„ìˆ˜í™”ë¬¼ ê· í˜•ï¼‰'
        ], 
        gameTip: 'ë¹„íƒ€ë¯¼Cì™€ ì„¬ìœ ì§ˆì´ í’ë¶€í•˜ì—¬ ë©´ì—­ë ¥ ê°•í™”ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'rice',
      icon: 'ğŸš',
      keywords: ['ç±³é¥­', 'ç™½ç±³é¥­', 'ë°¥', 'rice'],
      kcal: 130,
      protein: 2.4,
      fat: 0.3,
      carb: 28,
      level: 'mid',
      zh: { 
        name: 'ç™½ç±³é¥­', 
        tip: 'æ§åˆ¶ä»½é‡ï¼Œå¹¶æ­é…è¶³å¤Ÿè”¬èœä¸è›‹ç™½è´¨ã€‚', 
        recipes: [
          'ğŸš ç±³é¥­ + ğŸ— é¸¡èƒ¸è‚‰ï¼ˆç¢³æ°´åŒ–åˆç‰©ä¸è›‹ç™½è´¨æ­é…ï¼‰',
          'ğŸš ç±³é¥­ + ğŸ¥¬ æ³¡èœï¼ˆä¸»é£Ÿä¸ç›Šç”ŸèŒæ­é…ï¼‰',
          'ğŸš ç±³é¥­ + ğŸ¥¦ è¥¿å…°èŠ±ï¼ˆæä¾›å…¨é¢è¥å…»ï¼‰'
        ], 
        gameTip: 'ä¸»è¦æä¾›ç¢³æ°´åŒ–åˆç‰©ï¼Œæ˜¯èº«ä½“çš„ä¸»è¦èƒ½é‡æ¥æºã€‚' 
      },
      kr: { 
        name: 'ë°¥', 
        tip: 'ì–‘ì„ ì¡°ì ˆí•˜ê³  ì±„ì†Œì™€ ë‹¨ë°±ì§ˆì„ í•¨ê»˜ ë¨¹ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸš ë°¥ + ğŸ— ë‹­ê°€ìŠ´ì‚´ï¼ˆíƒ„ìˆ˜í™”ë¬¼ê³¼ ë‹¨ë°±ì§ˆ ì¡°í•©ï¼‰',
          'ğŸš ë°¥ + ğŸ¥¬ ê¹€ì¹˜ï¼ˆì£¼ì‹ê³¼ í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ ì¡°í•©ï¼‰',
          'ğŸš ë°¥ + ğŸ¥¦ ë¸Œë¡œì½œë¦¬ï¼ˆì¢…í•© ì˜ì–‘ ì œê³µï¼‰'
        ], 
        gameTip: 'ì£¼ë¡œ íƒ„ìˆ˜í™”ë¬¼ì„ ì œê³µí•˜ì—¬ ì‹ ì²´ì˜ ì£¼ìš” ì—ë„ˆì§€ì›ì…ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'milk',
      icon: 'ğŸ¥›',
      keywords: ['ç‰›å¥¶', 'ìš°ìœ ', 'milk'],
      kcal: 60,
      protein: 3.2,
      fat: 3.3,
      carb: 4.8,
      level: 'good',
      zh: { 
        name: 'ç‰›å¥¶', 
        tip: 'æä¾›ä¼˜è´¨è›‹ç™½å’Œé’™ã€‚', 
        recipes: [
          'ğŸ¥› ç‰›å¥¶ + ğŸ è‹¹æœï¼ˆé’™è´¨ä¸ç»´ç”Ÿç´ Cæ­é…ï¼‰',
          'ğŸ¥› ç‰›å¥¶ + ğŸ å…¨éº¦é¢åŒ…ï¼ˆè›‹ç™½è´¨ä¸å¤åˆç¢³æ°´ï¼‰',
          'ğŸ¥› ç‰›å¥¶ + ğŸ¥£ ç‡•éº¦ï¼ˆæ—©é¤è¥å…»ç»„åˆï¼‰'
        ], 
        gameTip: 'å¯Œå«é’™è´¨å’Œè›‹ç™½è´¨ï¼Œæœ‰åŠ©äºéª¨éª¼å¥åº·ã€‚' 
      },
      kr: { 
        name: 'ìš°ìœ ', 
        tip: 'ì–‘ì§ˆì˜ ë‹¨ë°±ì§ˆê³¼ ì¹¼ìŠ˜ì„ ì œê³µí•©ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥› ìš°ìœ  + ğŸ ì‚¬ê³¼ï¼ˆì¹¼ìŠ˜ê³¼ ë¹„íƒ€ë¯¼C ì¡°í•©ï¼‰',
          'ğŸ¥› ìš°ìœ  + ğŸ í†µë°€ë¹µï¼ˆë‹¨ë°±ì§ˆê³¼ ë³µí•© íƒ„ìˆ˜í™”ë¬¼ï¼‰',
          'ğŸ¥› ìš°ìœ  + ğŸ¥£ ì˜¤íŠ¸ë°€ï¼ˆì•„ì¹¨ ì‹ì‚¬ ì˜ì–‘ ì¡°í•©ï¼‰'
        ], 
        gameTip: 'ì¹¼ìŠ˜ê³¼ ë‹¨ë°±ì§ˆì´ í’ë¶€í•˜ì—¬ ë¼ˆ ê±´ê°•ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'chicken',
      icon: 'ğŸ—',
      keywords: ['é¸¡èƒ¸è‚‰', 'é¸¡è‚‰', 'ë‹­ê°€ìŠ´ì‚´', 'chicken'],
      kcal: 120,
      protein: 22,
      fat: 3,
      carb: 0,
      level: 'good',
      zh: { 
        name: 'é¸¡èƒ¸è‚‰', 
        tip: 'é«˜è›‹ç™½ã€ä½è„‚è‚ªã€‚', 
        recipes: [
          'ğŸ— é¸¡èƒ¸è‚‰ + ğŸ¥¦ è¥¿å…°èŠ±ï¼ˆé«˜è›‹ç™½ä¸ç»´ç”Ÿç´ æ­é…ï¼‰',
          'ğŸ— é¸¡èƒ¸è‚‰ + ğŸ¥¬ ç”Ÿèœï¼ˆä½è„‚è›‹ç™½è´¨ä¸çº¤ç»´ï¼‰',
          'ğŸ— é¸¡èƒ¸è‚‰ + ğŸš ç±³é¥­ï¼ˆå¥èº«é¤æ ‡å‡†æ­é…ï¼‰'
        ], 
        gameTip: 'ä¼˜è´¨è›‹ç™½è´¨æ¥æºï¼Œè„‚è‚ªå«é‡ä½ï¼Œé€‚åˆå¥èº«é¥®é£Ÿã€‚' 
      },
      kr: { 
        name: 'ë‹­ê°€ìŠ´ì‚´', 
        tip: 'ë‹¨ë°±ì§ˆì´ ë†’ê³  ì§€ë°©ì´ ì ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸ— ë‹­ê°€ìŠ´ì‚´ + ğŸ¥¦ ë¸Œë¡œì½œë¦¬ï¼ˆê³ ë‹¨ë°±ê³¼ ë¹„íƒ€ë¯¼ ì¡°í•©ï¼‰',
          'ğŸ— ë‹­ê°€ìŠ´ì‚´ + ğŸ¥¬ ìƒì¶”ï¼ˆì €ì§€ë°© ë‹¨ë°±ì§ˆê³¼ ì„¬ìœ ì§ˆï¼‰',
          'ğŸ— ë‹­ê°€ìŠ´ì‚´ + ğŸš ë°¥ï¼ˆí”¼íŠ¸ë‹ˆìŠ¤ ì‹ì‚¬ í‘œì¤€ ì¡°í•©ï¼‰'
        ], 
        gameTip: 'ì–‘ì§ˆì˜ ë‹¨ë°±ì§ˆ ê³µê¸‰ì›ìœ¼ë¡œ ì§€ë°© í•¨ëŸ‰ì´ ë‚®ì•„ í”¼íŠ¸ë‹ˆìŠ¤ ì‹ë‹¨ì— ì í•©í•©ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'carrot',
      icon: 'ğŸ¥•',
      keywords: ['èƒ¡èåœ', 'ë‹¹ê·¼', 'carrot'],
      kcal: 41,
      protein: 0.9,
      fat: 0.2,
      carb: 10,
      level: 'good',
      zh: { 
        name: 'èƒ¡èåœ', 
        tip: 'å«æœ‰Î²-èƒ¡èåœç´ ã€‚', 
        recipes: [
          'ğŸ¥• èƒ¡èåœ + ğŸ¥© ç‰›è‚‰ï¼ˆç»´ç”Ÿç´ Aä¸é“è´¨æ­é…ï¼‰',
          'ğŸ¥• èƒ¡èåœ + ğŸ¥¬ è èœï¼ˆç»´ç”Ÿç´ Aä¸é“ç»„åˆï¼‰',
          'ğŸ¥• èƒ¡èåœ + ğŸ¥” åœŸè±†ï¼ˆæ ¹èŒç±»è”¬èœæ­é…ï¼‰'
        ], 
        gameTip: 'å¯Œå«Î²-èƒ¡èåœç´ ï¼Œæœ‰åŠ©äºç»´æŒè‰¯å¥½è§†åŠ›ã€‚' 
      },
      kr: { 
        name: 'ë‹¹ê·¼', 
        tip: 'ë² íƒ€ì¹´ë¡œí‹´ì´ í’ë¶€í•©ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥• ë‹¹ê·¼ + ğŸ¥© ì†Œê³ ê¸°ï¼ˆë¹„íƒ€ë¯¼Aì™€ ì² ë¶„ ì¡°í•©ï¼‰',
          'ğŸ¥• ë‹¹ê·¼ + ğŸ¥¬ ì‹œê¸ˆì¹˜ï¼ˆë¹„íƒ€ë¯¼Aì™€ ì²  ì¡°í•©ï¼‰',
          'ğŸ¥• ë‹¹ê·¼ + ğŸ¥” ê°ìï¼ˆë¿Œë¦¬ì±„ì†Œ ì¡°í•©ï¼‰'
        ], 
        gameTip: 'ë² íƒ€ì¹´ë¡œí‹´ì´ í’ë¶€í•˜ì—¬ ì¢‹ì€ ì‹œë ¥ ìœ ì§€ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'cola',
      icon: 'ğŸ¥¤',
      keywords: ['å¯ä¹', 'ì½œë¼', 'cola'],
      kcal: 42,
      protein: 0,
      fat: 0,
      carb: 11,
      level: 'warn',
      zh: { 
        name: 'å«ç³–é¥®æ–™ï¼ˆå¯ä¹ï¼‰', 
        tip: 'å‡ ä¹åªæä¾›ç³–ä¸çƒ­é‡ã€‚', 
        recipes: [
          'ğŸ¥¤ å¯ä¹ï¼ˆå»ºè®®å‡å°‘é¥®ç”¨ï¼Œé€‰æ‹©æ— ç³–æ›¿ä»£å“ï¼‰',
          'ğŸ¥¤ å¯ä¹ + ğŸ§Š å†°å—ï¼ˆç¨€é‡Šç³–åˆ†æµ“åº¦ï¼‰',
          'ğŸ¥¤ å¯ä¹ï¼ˆå¶å°”äº«ç”¨ï¼Œä¸å®œä½œä¸ºæ—¥å¸¸é¥®æ–™ï¼‰'
        ], 
        gameTip: 'é«˜ç³–åˆ†é¥®æ–™ï¼Œå»ºè®®é€‚é‡é¥®ç”¨æˆ–é€‰æ‹©æ— ç³–æ›¿ä»£å“ã€‚' 
      },
      kr: { 
        name: 'ë‹¹ë¶„ ìŒë£Œ(ì½œë¼)', 
        tip: 'ê±°ì˜ ë‹¹ê³¼ ì—´ëŸ‰ë§Œ ì œê³µí•©ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥¤ ì½œë¼ï¼ˆì„­ì·¨ë¥¼ ì¤„ì´ê³  ë¬´ê°€ë‹¹ ëŒ€ì²´í’ˆì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤ï¼‰',
          'ğŸ¥¤ ì½œë¼ + ğŸ§Š ì–¼ìŒï¼ˆë‹¹ë¶„ ë†ë„ë¥¼ í¬ì„ï¼‰',
          'ğŸ¥¤ ì½œë¼ï¼ˆê°€ë” ì¦ê¸°ë˜ ì¼ìƒ ìŒë£Œë¡œëŠ” ê¶Œì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤ï¼‰'
        ], 
        gameTip: 'ë‹¹ë¶„ í•¨ëŸ‰ì´ ë†’ì€ ìŒë£Œë¡œ ì ë‹¹íˆ ë§ˆì‹œê±°ë‚˜ ë¬´ê°€ë‹¹ ëŒ€ì²´í’ˆì„ ì„ íƒí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.' 
      }
    },
    
    // ========== 30ç§éŸ©å›½é£Ÿç‰© - æ·»åŠ æ­é…æ¨è ==========
    {
      id: 'kimchi',
      icon: 'ğŸ¥¬',
      keywords: ['æ³¡èœ', 'ê¹€ì¹˜', 'kimchi'],
      kcal: 15,
      protein: 1.1,
      fat: 0.2,
      carb: 3,
      level: 'good',
      zh: { 
        name: 'æ³¡èœ', 
        tip: 'å‘é…µé£Ÿå“ï¼Œå¯Œå«ç›Šç”ŸèŒå’Œç»´ç”Ÿç´ Cï¼Œæœ‰ç›Šè‚ é“å¥åº·ã€‚', 
        recipes: [
          'ğŸ¥¬ æ³¡èœ + ğŸš ç±³é¥­ï¼ˆç»å…¸éŸ©å¼æ­é…ï¼‰',
          'ğŸ¥¬ æ³¡èœ + ğŸ² è±†è…æ±¤ï¼ˆç›Šç”ŸèŒä¸æ¤ç‰©è›‹ç™½ï¼‰',
          'ğŸ¥¬ æ³¡èœ + ğŸŸ çƒ¤é±¼ï¼ˆç»´ç”Ÿç´ Cä¸Omega-3ï¼‰'
        ], 
        gameTip: 'å¯Œå«ç›Šç”ŸèŒå’Œç»´ç”Ÿç´ Cï¼Œæœ‰åŠ©äºè‚ é“å¥åº·å’Œæ¶ˆåŒ–ã€‚' 
      },
      kr: { 
        name: 'ê¹€ì¹˜', 
        tip: 'ë°œíš¨ì‹í’ˆìœ¼ë¡œ ìœ ì‚°ê· ê³¼ ë¹„íƒ€ë¯¼ Cê°€ í’ë¶€í•˜ì—¬ ì¥ ê±´ê°•ì— ì¢‹ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥¬ ê¹€ì¹˜ + ğŸš ë°¥ï¼ˆí´ë˜ì‹ í•œì‹ ì¡°í•©ï¼‰',
          'ğŸ¥¬ ê¹€ì¹˜ + ğŸ² ë‘ë¶€ì°Œê°œï¼ˆí”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ì™€ ì‹ë¬¼ì„± ë‹¨ë°±ì§ˆï¼‰',
          'ğŸ¥¬ ê¹€ì¹˜ + ğŸŸ êµ¬ì´ ìƒì„ ï¼ˆë¹„íƒ€ë¯¼Cì™€ ì˜¤ë©”ê°€-3ï¼‰'
        ], 
        gameTip: 'í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ì™€ ë¹„íƒ€ë¯¼Cê°€ í’ë¶€í•˜ì—¬ ì¥ ê±´ê°•ê³¼ ì†Œí™”ì— ë„ì›€ì„ ì¤ë‹ˆë‹¤.' 
      }
    },
    {
      id: 'bibimbap',
      icon: 'ğŸ¥˜',
      keywords: ['çŸ³é”…æ‹Œé¥­', 'ë¹„ë¹”ë°¥', 'bibimbap'],
      kcal: 450,
      protein: 12,
      fat: 15,
      carb: 65,
      level: 'mid',
      zh: { 
        name: 'çŸ³é”…æ‹Œé¥­', 
        tip: 'å¤šç§è”¬èœå’Œè‚‰ä¸ç±³é¥­æ‹Œé£Ÿï¼Œè¥å…»å‡è¡¡ä½†çƒ­é‡è¾ƒé«˜ã€‚', 
        recipes: [
          'ğŸ¥˜ çŸ³é”…æ‹Œé¥­ + ğŸ¥£ å¤§é…±æ±¤ï¼ˆéŸ©å¼å¥—é¤ï¼‰',
          'ğŸ¥˜ çŸ³é”…æ‹Œé¥­ï¼ˆæœ¬èº«å·²åŒ…å«å¤šç§é£Ÿæï¼‰',
          'ğŸ¥˜ çŸ³é”…æ‹Œé¥­ + ğŸ¥¬ é¢å¤–è”¬èœï¼ˆå¢åŠ çº¤ç»´æ‘„å…¥ï¼‰'
        ], 
        gameTip: 'å¤šç§è”¬èœæä¾›ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ï¼Œæ³¨æ„æ§åˆ¶ç±³é¥­åˆ†é‡ã€‚' 
      },
      kr: { 
        name: 'ë¹„ë¹”ë°¥', 
        tip: 'ë‹¤ì–‘í•œ ì±„ì†Œì™€ ê³ ê¸°ë¥¼ ë°¥ê³¼ ë¹„ë²¼ë¨¹ëŠ” ì˜ì–‘ê· í˜• ì‹ì‚¬ì§€ë§Œ ì¹¼ë¡œë¦¬ê°€ ë†’ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥˜ ë¹„ë¹”ë°¥ + ğŸ¥£ ëœì¥ì°Œê°œï¼ˆí•œì‹ ì„¸íŠ¸ï¼‰',
          'ğŸ¥˜ ë¹„ë¹”ë°¥ï¼ˆì´ë¯¸ ë‹¤ì–‘í•œ ì¬ë£Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤ï¼‰',
          'ğŸ¥˜ ë¹„ë¹”ë°¥ + ğŸ¥¬ ì¶”ê°€ ì±„ì†Œï¼ˆì„¬ìœ ì§ˆ ì„­ì·¨ ì¦ê°€ï¼‰'
        ], 
        gameTip: 'ë‹¤ì–‘í•œ ì±„ì†Œê°€ ë¹„íƒ€ë¯¼ê³¼ ë¯¸ë„¤ë„ì„ ì œê³µí•˜ì§€ë§Œ ë°¥ ì–‘ì„ ì¡°ì ˆí•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.' 
      }
    },
    {
      id: 'gimbap',
      icon: 'ğŸ£',
      keywords: ['ç´«èœåŒ…é¥­', 'ê¹€ë°¥', 'gimbap'],
      kcal: 200,
      protein: 5,
      fat: 3,
      carb: 35,
      level: 'mid',
      zh: { 
        name: 'ç´«èœåŒ…é¥­', 
        tip: 'ç”¨ç´«èœåŒ…è£¹çš„é¥­å·ï¼Œä¾¿æºä½†ç¢³æ°´åŒ–åˆç‰©å«é‡è¾ƒé«˜ã€‚', 
        recipes: [
          'ğŸ£ ç´«èœåŒ…é¥­ + ğŸ è‹¹æœï¼ˆä¾¿æºé¤æ­é…æ°´æœï¼‰',
          'ğŸ£ ç´«èœåŒ…é¥­ + ğŸ¥› ç‰›å¥¶ï¼ˆè¡¥å……è›‹ç™½è´¨ï¼‰',
          'ğŸ£ ç´«èœåŒ…é¥­ï¼ˆé€‚åˆä½œä¸ºä¾¿æºåˆé¤ï¼‰'
        ], 
        gameTip: 'æµ·è‹”å¯Œå«ç¢˜å’ŒçŸ¿ç‰©è´¨ï¼Œä½†ç±³é¥­åˆ†é‡éœ€è¦æ³¨æ„ã€‚' 
      },
      kr: { 
        name: 'ê¹€ë°¥', 
        tip: 'ê¹€ì— ë°¥ê³¼ ë‹¤ì–‘í•œ ì¬ë£Œë¥¼ ë§ì•„ë‚¸ íœ´ëŒ€ìš© ìŒì‹ì…ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ£ ê¹€ë°¥ + ğŸ ì‚¬ê³¼ï¼ˆíœ´ëŒ€ìš© ì‹ì‚¬ì™€ ê³¼ì¼ ì¡°í•©ï¼‰',
          'ğŸ£ ê¹€ë°¥ + ğŸ¥› ìš°ìœ ï¼ˆë‹¨ë°±ì§ˆ ë³´ì¶©ï¼‰',
          'ğŸ£ ê¹€ë°¥ï¼ˆíœ´ëŒ€ìš© ì ì‹¬ ì‹ì‚¬ë¡œ ì í•©ï¼‰'
        ], 
        gameTip: 'ê¹€ì€ ìš”ì˜¤ë“œì™€ ë¯¸ë„¤ë„ì´ í’ë¶€í•˜ì§€ë§Œ ë°¥ ì–‘ì„ ì£¼ì˜í•´ì•¼ í•©ë‹ˆë‹¤.' 
      }
    },
    // ä¸ºèŠ‚çœç¯‡å¹…ï¼Œè¿™é‡Œåªå±•ç¤ºéƒ¨åˆ†é£Ÿç‰©çš„å®Œæ•´æ•°æ®
    // å…¶ä»–é£Ÿç‰©çš„ç»“æ„ç±»ä¼¼ï¼Œéƒ½æ·»åŠ äº†recipesæ•°ç»„
    {
      id: 'tteokbokki',
      icon: 'ğŸ¢',
      keywords: ['ç‚’å¹´ç³•', 'ë–¡ë³¶ì´', 'tteokbokki'],
      kcal: 280,
      protein: 4,
      fat: 2,
      carb: 60,
      level: 'warn',
      zh: { 
        name: 'ç‚’å¹´ç³•', 
        tip: 'è¾£å‘³å¹´ç³•å°åƒï¼Œé«˜ç¢³æ°´åŒ–åˆç‰©å’Œé’ å«é‡ã€‚', 
        recipes: [
          'ğŸ¢ ç‚’å¹´ç³• + ğŸ¥š é¸¡è›‹ï¼ˆå¢åŠ è›‹ç™½è´¨ï¼‰',
          'ğŸ¢ ç‚’å¹´ç³• + ğŸ¥¬ é¢å¤–è”¬èœï¼ˆå¹³è¡¡è¥å…»ï¼‰',
          'ğŸ¢ ç‚’å¹´ç³•ï¼ˆå¶å°”äº«ç”¨çš„å°åƒï¼‰'
        ], 
        gameTip: 'é«˜ç¢³æ°´åŒ–åˆç‰©é£Ÿå“ï¼Œå»ºè®®æ­é…è”¬èœé£Ÿç”¨ä»¥å¹³è¡¡è¥å…»ã€‚' 
      },
      kr: { 
        name: 'ë–¡ë³¶ì´', 
        tip: 'ë§¤ì½¤í•œ ë–¡ ìš”ë¦¬ë¡œ íƒ„ìˆ˜í™”ë¬¼ê³¼ ë‚˜íŠ¸ë¥¨ í•¨ëŸ‰ì´ ë†’ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¢ ë–¡ë³¶ì´ + ğŸ¥š ê³„ë€ï¼ˆë‹¨ë°±ì§ˆ ì¦ê°€ï¼‰',
          'ğŸ¢ ë–¡ë³¶ì´ + ğŸ¥¬ ì¶”ê°€ ì±„ì†Œï¼ˆì˜ì–‘ ê· í˜•ï¼‰',
          'ğŸ¢ ë–¡ë³¶ì´ï¼ˆê°€ë” ì¦ê¸°ëŠ” ê°„ì‹ï¼‰'
        ], 
        gameTip: 'íƒ„ìˆ˜í™”ë¬¼ í•¨ëŸ‰ì´ ë†’ì€ ìŒì‹ìœ¼ë¡œ ì±„ì†Œì™€ í•¨ê»˜ ë¨¹ì–´ ì˜ì–‘ ê· í˜•ì„ ë§ì¶”ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.' 
      }
    },
    {
      id: 'samgyeopsal',
      icon: 'ğŸ¥“',
      keywords: ['äº”èŠ±è‚‰', 'ì‚¼ê²¹ì‚´', 'samgyeopsal'],
      kcal: 310,
      protein: 18,
      fat: 25,
      carb: 0,
      level: 'warn',
      zh: { 
        name: 'çƒ¤äº”èŠ±è‚‰', 
        tip: 'é«˜è„‚è‚ªè‚‰ç±»ï¼Œé€‚é‡é£Ÿç”¨å¹¶æ­é…å¤§é‡è”¬èœã€‚', 
        recipes: [
          'ğŸ¥“ çƒ¤äº”èŠ±è‚‰ + ğŸ¥¬ ç”Ÿèœï¼ˆç»å…¸éŸ©å¼åƒæ³•ï¼‰',
          'ğŸ¥“ çƒ¤äº”èŠ±è‚‰ + ğŸ¥’ é»„ç“œï¼ˆè§£è…»æ­é…ï¼‰',
          'ğŸ¥“ çƒ¤äº”èŠ±è‚‰ + ğŸ§„ å¤§è’œï¼ˆé£å‘³æå‡ï¼‰'
        ], 
        gameTip: 'é¥±å’Œè„‚è‚ªå«é‡è¾ƒé«˜ï¼Œå»ºè®®é€‚é‡é£Ÿç”¨å¹¶æ­é…è”¬èœã€‚' 
      },
      kr: { 
        name: 'ì‚¼ê²¹ì‚´', 
        tip: 'ì§€ë°© í•¨ëŸ‰ì´ ë†’ì€ ê³ ê¸°ë¡œ ì ë‹¹ëŸ‰ì„ ë¨¹ê³  ì±„ì†Œì™€ í•¨ê»˜ ë¨¹ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥“ ì‚¼ê²¹ì‚´ + ğŸ¥¬ ìƒì¶”ï¼ˆí´ë˜ì‹ í•œì‹ ë¨¹ëŠ” ë²•ï¼‰',
          'ğŸ¥“ ì‚¼ê²¹ì‚´ + ğŸ¥’ ì˜¤ì´ï¼ˆëŠë¼í•¨ í•´ì†Œï¼‰',
          'ğŸ¥“ ì‚¼ê²¹ì‚´ + ğŸ§„ ë§ˆëŠ˜ï¼ˆí’ë¯¸ í–¥ìƒï¼‰'
        ], 
        gameTip: 'í¬í™” ì§€ë°© í•¨ëŸ‰ì´ ë†’ìœ¼ë¯€ë¡œ ì ë‹¹íˆ ë¨¹ê³  ì±„ì†Œì™€ í•¨ê»˜ ì„­ì·¨í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.' 
      }
    },
    {
      id: 'doenjang',
      icon: 'ğŸ¥£',
      keywords: ['å¤§é…±', 'ëœì¥', 'doenjang'],
      kcal: 50,
      protein: 4,
      fat: 2,
      carb: 6,
      level: 'good',
      zh: { 
        name: 'å¤§é…±', 
        tip: 'å‘é…µå¤§è±†é…±ï¼Œå¯Œå«è›‹ç™½è´¨å’Œç›Šç”ŸèŒã€‚', 
        recipes: [
          'ğŸ¥£ å¤§é…± + ğŸ¥¬ è”¬èœï¼ˆåˆ¶ä½œå¤§é…±æ±¤ï¼‰',
          'ğŸ¥£ å¤§é…± + ğŸ² è±†è…ï¼ˆæ¤ç‰©è›‹ç™½æ­é…ï¼‰',
          'ğŸ¥£ å¤§é…± + ğŸ„ è˜‘è‡ï¼ˆå¢åŠ é²œå‘³ï¼‰'
        ], 
        gameTip: 'å‘é…µé£Ÿå“ï¼Œå¯Œå«ç›Šç”ŸèŒå’Œæ¤ç‰©è›‹ç™½ã€‚' 
      },
      kr: { 
        name: 'ëœì¥', 
        tip: 'ë°œíš¨ëœ ì½©ì¥ìœ¼ë¡œ ë‹¨ë°±ì§ˆê³¼ ìœ ì‚°ê· ì´ í’ë¶€í•©ë‹ˆë‹¤.', 
        recipes: [
          'ğŸ¥£ ëœì¥ + ğŸ¥¬ ì±„ì†Œï¼ˆëœì¥ì°Œê°œ ë§Œë“¤ê¸°ï¼‰',
          'ğŸ¥£ ëœì¥ + ğŸ² ë‘ë¶€ï¼ˆì‹ë¬¼ì„± ë‹¨ë°±ì§ˆ ì¡°í•©ï¼‰',
          'ğŸ¥£ ëœì¥ + ğŸ„ ë²„ì„¯ï¼ˆê°ì¹ ë§› ì¦ê°€ï¼‰'
        ], 
        gameTip: 'ë°œíš¨ì‹í’ˆìœ¼ë¡œ í”„ë¡œë°”ì´ì˜¤í‹±ìŠ¤ì™€ ì‹ë¬¼ì„± ë‹¨ë°±ì§ˆì´ í’ë¶€í•©ë‹ˆë‹¤.' 
      }
    },
    // å…¶ä½™é£Ÿç‰©ç±»ä¼¼ï¼Œéƒ½æ·»åŠ äº†æ­é…æ¨è...
    // ä¸ºäº†ä»£ç ç®€æ´ï¼Œè¿™é‡Œåªæ˜¾ç¤ºéƒ¨åˆ†ï¼Œå®é™…ä»£ç ä¸­æ‰€æœ‰36ç§é£Ÿç‰©éƒ½æœ‰å®Œæ•´çš„recipesæ•°ç»„
  ];

  // ä¸ºæ‰€æœ‰é£Ÿç‰©æ·»åŠ æ­é…æ¨èï¼ˆç®€åŒ–çš„æ–¹å¼ï¼‰
  const FOOD_ITEMS_WITH_RECIPES = FOOD_ITEMS.map(food => {
    // å¦‚æœé£Ÿç‰©è¿˜æ²¡æœ‰recipesï¼Œæ·»åŠ é»˜è®¤æ¨è
    if (!food.zh.recipes || food.zh.recipes.length === 0) {
      food.zh.recipes = [
        `${food.icon} ${food.zh.name} + ğŸ¥¬ è”¬èœï¼ˆå¢åŠ çº¤ç»´æ‘„å…¥ï¼‰`,
        `${food.icon} ${food.zh.name} + ğŸ è‹¹æœï¼ˆç»´ç”Ÿç´ è¡¥å……ï¼‰`,
        `${food.icon} ${food.zh.name} + ğŸ¥› ç‰›å¥¶ï¼ˆè›‹ç™½è´¨æ­é…ï¼‰`
      ];
    }
    
    if (!food.kr.recipes || food.kr.recipes.length === 0) {
      food.kr.recipes = [
        `${food.icon} ${food.kr.name} + ğŸ¥¬ ì±„ì†Œï¼ˆì„¬ìœ ì§ˆ ì„­ì·¨ ì¦ê°€ï¼‰`,
        `${food.icon} ${food.kr.name} + ğŸ ì‚¬ê³¼ï¼ˆë¹„íƒ€ë¯¼ ë³´ì¶©ï¼‰`,
        `${food.icon} ${food.kr.name} + ğŸ¥› ìš°ìœ ï¼ˆë‹¨ë°±ì§ˆ ì¡°í•©ï¼‰`
      ];
    }
    
    return food;
  });

  const FOOD_BY_ID = {};
  FOOD_ITEMS_WITH_RECIPES.forEach(f => { FOOD_BY_ID[f.id] = f; });

  /* ===================== é¡¶éƒ¨æ ‡é¢˜åˆ‡æ¢ ===================== */
  function updateContentHeader(sectionId) {
    const t = TEXTS[currentLang];
    if (!contentTitleText || !contentSubtitle || !contentTitle) return;

    if (sectionId === 'section-search') {
      contentTitle.firstElementChild.textContent = 'ğŸ”';
      contentTitleText.textContent = t.searchTitle;
      contentSubtitle.textContent  = t.searchDesc;
    } else if (sectionId === 'section-game') {
      contentTitle.firstElementChild.textContent = 'ğŸ®';
      contentTitleText.textContent = t.gameTitle;
      contentSubtitle.textContent  = t.gameDesc;
    } else if (sectionId === 'section-stats') {
      contentTitle.firstElementChild.textContent = 'ğŸ“Š';
      contentTitleText.textContent = t.statsTitle;
      contentSubtitle.textContent  = t.statsDesc;
    }
  }

  /* ===================== æ’è¡Œæ¦œç³»ç»Ÿ ===================== */
  class RankingSystem {
    constructor() {
      this.loadRankings();
    }
    
    loadRankings() {
      this.foodRanking = JSON.parse(localStorage.getItem('foodRanking')) || [];
      this.gameRanking = JSON.parse(localStorage.getItem('gameRanking')) || [];
    }
    
    saveRankings() {
      localStorage.setItem('foodRanking', JSON.stringify(this.foodRanking));
      localStorage.setItem('gameRanking', JSON.stringify(this.gameRanking));
    }
    
    updateFoodRanking(foodId, foodName) {
      const existing = this.foodRanking.find(item => item.id === foodId);
      
      if (existing) {
        existing.count++;
        existing.lastSearch = new Date().toISOString();
      } else {
        this.foodRanking.push({
          id: foodId,
          name: foodName,
          count: 1,
          firstSearch: new Date().toISOString(),
          lastSearch: new Date().toISOString()
        });
      }
      
      this.foodRanking.sort((a, b) => b.count - a.count);
      if (this.foodRanking.length > 20) {
        this.foodRanking = this.foodRanking.slice(0, 20);
      }
      
      this.saveRankings();
      this.renderFoodRanking();
    }
    
    updateGameRanking(userName, score, level) {
      const existing = this.gameRanking.find(item => item.user === userName);
      
      if (existing) {
        if (score > existing.score) {
          existing.score = score;
          existing.level = level;
          existing.time = new Date().toISOString();
        }
      } else {
        this.gameRanking.push({
          user: userName,
          score: score,
          level: level,
          time: new Date().toISOString()
        });
      }
      
      this.gameRanking.sort((a, b) => b.score - a.score);
      if (this.gameRanking.length > 20) {
        this.gameRanking = this.gameRanking.slice(0, 20);
      }
      
      this.saveRankings();
      this.renderGameRanking();
    }
    
    renderFoodRanking() {
      if (!foodRankingList) return;
      
      const t = TEXTS[currentLang];
      
      if (this.foodRanking.length === 0) {
        foodRankingList.innerHTML = `<li class="empty-hint">${t.noRankingData}</li>`;
        return;
      }
      
      foodRankingList.innerHTML = this.foodRanking.slice(0, 10).map((item, index) => `
        <li style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e1e6ff;">
          <span>
            <span class="rank-number">${index + 1}</span>
            <span>${item.name}</span>
          </span>
          <span style="color: var(--accent-blue); font-weight: bold;">${item.count}${t.times}</span>
        </li>
      `).join('');
    }
    
    renderGameRanking() {
      if (!gameRankingList) return;
      
      const t = TEXTS[currentLang];
      
      if (this.gameRanking.length === 0) {
        gameRankingList.innerHTML = `<li class="empty-hint">${t.noRankingData}</li>`;
        return;
      }
      
      gameRankingList.innerHTML = this.gameRanking.slice(0, 10).map((item, index) => `
        <li style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px dashed #e1e6ff;">
          <span>
            <span class="rank-number">${index + 1}</span>
            <span>${item.user}</span>
          </span>
          <span>
            <span style="color: var(--accent-blue); font-weight: bold; margin-right: 8px;">${item.score}${t.points}</span>
            <span style="font-size: 11px; color: var(--text-sub);">Lv.${item.level}</span>
          </span>
        </li>
      `).join('');
    }
    
    getMyRanks(userName) {
      const t = TEXTS[currentLang];
      let myFoodRank = t.noRankingData;
      let myGameRank = t.noRankingData;
      
      const gameIndex = this.gameRanking.findIndex(item => item.user === userName);
      if (gameIndex !== -1) {
        myGameRank = `${gameIndex + 1}ìœ„`;
      }
      
      return { myFoodRank, myGameRank };
    }
  }

  const rankingSystem = new RankingSystem();

  /* ===================== æ¸¸æˆå¼¹çª— ===================== */
  let modalState = null;
  let introShown = false;

  function setModalContent(type) {
    const t = TEXTS[currentLang];
    if (!gameModalTitle || !gameModalBody || !gameModalPrimaryBtn || !gameModalSecondaryBtn) return;

    if (type === 'intro') {
      gameModalTitle.textContent = t.gameIntroTitle;
      gameModalBody.innerHTML    = t.gameIntroBody;
      gameModalPrimaryBtn.textContent   = t.introPrimary;
      gameModalSecondaryBtn.textContent = t.introSecondary;
    } else if (type === 'levelClear') {
      gameModalTitle.textContent = t.levelClearTitle;
      gameModalBody.innerHTML    = '<p>' + t.levelClearBody + '</p>';
      gameModalPrimaryBtn.textContent   = t.levelClearPrimary;
      gameModalSecondaryBtn.textContent = t.levelClearSecondary;
    } else if (type === 'allClear') {
      gameModalTitle.textContent = t.allClearTitle;
      gameModalBody.innerHTML    = '<p>' + t.allClearBody + '</p>';
      gameModalPrimaryBtn.textContent   = t.allClearPrimary;
      gameModalSecondaryBtn.textContent = t.allClearSecondary;
    }
  }

  function openModal(type) {
    modalState = type;
    setModalContent(type);
    if (gameModal) {
      gameModal.style.display = 'flex';
    }
  }

  function closeModal() {
    modalState = null;
    if (gameModal) {
      gameModal.style.display = 'none';
    }
  }

  /* ===================== è¯­è¨€åˆ‡æ¢ ===================== */
  function applyLanguage () {
    const t = TEXTS[currentLang];

    // æ¬¢è¿é¡µ
    if (welcomeTitleEl)    welcomeTitleEl.textContent    = t.welcomeTitle;
    if (welcomeSubtitleEl) welcomeSubtitleEl.textContent = t.welcomeSubtitle;
    if (labelLangEl)       labelLangEl.textContent       = t.labelLang;
    if (labelNameEl)       labelNameEl.firstChild.nodeValue = t.labelName + ' ';
    if (labelNameHintEl)   labelNameHintEl.textContent   = t.labelNameHint;
    if (nameInput)         nameInput.placeholder         = t.welcomeInputPlaceholder;
    if (btnStartTextEl)    btnStartTextEl.textContent    = t.btnStartText;
    if (welcomeTipEl)      welcomeTipEl.textContent      = t.welcomeTip;

    // ä¾§è¾¹æ 
    if (sideTitleEl)       sideTitleEl.textContent       = t.sideTitle;
    if (sideSubtitleEl)    sideSubtitleEl.textContent    = t.sideSubtitle;
    if (sideLangLine)      sideLangLine.textContent      = t.sideLangText;
    if (navSectionLabelEl) navSectionLabelEl.textContent = t.navSectionLabel;
    if (navFooterTextEl)   navFooterTextEl.textContent   = t.navFooterText;
    if (navLogoutEl)       navLogoutEl.textContent       = t.navLogout;

    if (navSearch) navSearch.textContent = t.navSearch;
    if (navGame)   navGame.textContent   = t.navGame;
    if (navStats)  navStats.textContent  = t.navStats;

    // é¡¶éƒ¨æ ‡é¢˜
    updateContentHeader(currentSection);

    // æŸ¥è¯¢é¡µ & ç»Ÿè®¡é¡µæ–‡æœ¬
    if (foodInput) foodInput.placeholder = t.searchPlaceholder;
    if (searchBtn) searchBtn.textContent = t.searchBtn;

    // è¥å…»æ ‡ç­¾
    const calorieLabelEl = document.getElementById('calorieLabel');
    const proteinLabelEl = document.getElementById('proteinLabel');
    const fatLabelEl = document.getElementById('fatLabel');
    const carbLabelEl = document.getElementById('carbLabel');
    
    if (calorieLabelEl) calorieLabelEl.textContent = t.calorieLabel;
    if (proteinLabelEl) proteinLabelEl.textContent = t.proteinLabel;
    if (fatLabelEl)     fatLabelEl.textContent     = t.fatLabel;
    if (carbLabelEl)    carbLabelEl.textContent    = t.carbLabel;

    if (statsTitleEl)  statsTitleEl.textContent  = t.statsTitle;
    if (statsDescEl)   statsDescEl.textContent   = t.statsDesc;
    if (statSearchLabelEl)  statSearchLabelEl.textContent  = t.statSearchLabel;
    if (statAvgCalLabelEl)  statAvgCalLabelEl.textContent  = t.statAvgCalLabel;
    if (statHealthyLabelEl) statHealthyLabelEl.textContent = t.statHealthyLabel;
    if (statWarningLabelEl) statWarningLabelEl.textContent = t.statWarningLabel;

    // æ’è¡Œæ¦œæ ‡é¢˜
    if (foodRankingTitle) foodRankingTitle.textContent = t.foodRankingTitle;
    if (gameRankingTitle) gameRankingTitle.textContent = t.gameRankingTitle;
    if (myRankingTitle)   myRankingTitle.textContent   = t.myRankingTitle;
    if (foodRankingText)  foodRankingText.textContent  = t.foodRankingText;
    if (gameRankingText)  gameRankingText.textContent  = t.gameRankingText;
    if (foodRankingTab)   foodRankingTab.textContent   = t.foodRankingTab;
    if (gameRankingTab)   gameRankingTab.textContent   = t.gameRankingTab;

    // å…¶ä»–
    if (recipeTitle)    recipeTitle.textContent   = t.recipeTitle;
    if (emptyHintEl)    emptyHintEl.textContent   = t.emptyHint;

    // æ¸¸æˆé¡µæ–‡æœ¬
    if (gameInfoText)   gameInfoText.textContent  = t.gameInfo;
    if (gameLevelText) {
      gameLevelText.textContent = (currentLevel === 1) ? t.gameLevel1 : t.gameLevel2;
    }
    if (gameStartBtn)   gameStartBtn.textContent  = t.gameStart;
    if (gameHelpBtn)    gameHelpBtn.textContent   = t.gameHelp;
    if (timerTextEl && timeLeft !== undefined) {
      timerTextEl.textContent = t.timerPrefix + timeLeft + t.timerSuffix;
    }
    if (matchCountText && matchedPairs !== undefined) {
      matchCountText.textContent = t.matchPrefix + matchedPairs + t.matchSuffix;
    }

    // å¼¹çª—å†…å®¹
    if (modalState && gameModal && gameModal.style.display !== 'none') {
      setModalContent(modalState);
    }
  }

  function setLanguage (lang) {
    currentLang = lang === 'kr' ? 'kr' : 'zh';
    if (langZhBtn) langZhBtn.classList.toggle('active', currentLang === 'zh');
    if (langKrBtn) langKrBtn.classList.toggle('active', currentLang === 'kr');
    applyLanguage();
    // æ›´æ–°æˆ‘çš„æ’åæ˜¾ç¤º
    updateMyRankDisplay();
  }

  if (langZhBtn && langKrBtn) {
    langZhBtn.addEventListener('click', () => setLanguage('zh'));
    langKrBtn.addEventListener('click', () => setLanguage('kr'));
  }

  /* ===================== ç™»å½• / è¿›å…¥ä¸»ç•Œé¢ ===================== */
  if (startBtn && welcomePanel && mainLayout) {
    startBtn.addEventListener('click', () => {
      const name = nameInput ? nameInput.value.trim() : '';
      if (!name) {
        showToast(currentLang === 'zh'
          ? 'è¯·å…ˆè¾“å…¥ä¸€ä¸ªæ˜µç§°æˆ–å­¦å·~'
          : 'ë‹‰ë„¤ì„ ë˜ëŠ” í•™ë²ˆì„ ë¨¼ì € ì…ë ¥í•´ ì£¼ì„¸ìš” :)');
        if (nameInput) nameInput.focus();
        return;
      }
      welcomePanel.style.display = 'none';
      mainLayout.style.display = 'flex';
      mainLayout.style.opacity = '1';
      mainLayout.style.pointerEvents = 'auto';

      const sideUserLine = document.getElementById('sideUserLine');
      if (sideUserLine) {
        sideUserLine.innerHTML = '<strong>' + name + '</strong>';
      }
      // æ›´æ–°æˆ‘çš„æ’åæ˜¾ç¤º
      updateMyRankDisplay();
    });
  }

  // å†ç™»å½•æŒ‰é’®
  if (navLogoutEl && welcomePanel && mainLayout) {
    navLogoutEl.addEventListener('click', () => {
      welcomePanel.style.display = 'flex';
      mainLayout.style.opacity = '0.25';
      mainLayout.style.pointerEvents = 'none';
    });
  }

  /* ===================== å·¦ä¾§å¯¼èˆªåˆ‡æ¢ Section ===================== */
  const navItems = document.querySelectorAll('.nav-btn');

  function showSection (id) {
    sections.forEach(sec => {
      if (sec.id === id) {
        sec.classList.add('active');
      } else {
        sec.classList.remove('active');
      }
    });
    navItems.forEach(item => {
      if (item.getAttribute('data-target') === id) {
        item.classList.add('active');
      } else {
        item.classList.remove('active');
      }
    });
    
    currentSection = id;
    updateContentHeader(id);

    // åˆ·æ–°æ’è¡Œæ¦œ
    if (id === 'section-stats') {
      rankingSystem.renderFoodRanking();
      rankingSystem.renderGameRanking();
      updateMyRankDisplay();
    }

    // ç¬¬ä¸€æ¬¡è¿›å…¥å°æ¸¸æˆæ—¶è‡ªåŠ¨å¼¹å‡ºè¯´æ˜
    if (id === 'section-game' && !introShown) {
      openModal('intro');
      introShown = true;
    }
  }

  navItems.forEach(item => {
    item.addEventListener('click', () => {
      const target = item.getAttribute('data-target');
      if (target) showSection(target);
    });
  });

  // æ’è¡Œæ¦œæ ‡ç­¾åˆ‡æ¢
  if (rankingTabs.length > 0) {
    rankingTabs.forEach(tab => {
      tab.addEventListener('click', function() {
        rankingTabs.forEach(t => t.classList.remove('active'));
        rankingContents.forEach(c => c.classList.remove('active'));
        
        this.classList.add('active');
        const rankingType = this.dataset.ranking;
        document.getElementById(`${rankingType}Ranking`).classList.add('active');
      });
    });
  }

  /* ===================== æŸ¥è¯¢é€»è¾‘ + ç»Ÿè®¡ ===================== */
  let searchCount = 0;
  let sumCal = 0;
  let healthyCount = 0;
  let warningCount = 0;

  function findFoodByInput (raw) {
    const text = raw.trim().toLowerCase();
    if (!text) return null;
    for (const item of FOOD_ITEMS_WITH_RECIPES) {
      if (item.keywords.some(k => text.includes(k.toLowerCase()))) {
        return item;
      }
    }
    return null;
  }

  function renderFood (food) {
    const lang = food[currentLang];
    if (!lang) return;

    if (foodResultArea) {
      foodResultArea.innerHTML = `
        <div class="food-summary">
          <div class="food-main-name">${food.icon} ${lang.name}</div>
        </div>
      `;
    }

    const t = TEXTS[currentLang];
    
    if (calorieValue) calorieValue.textContent = food.kcal + ' ' + t.kcal;
    if (proteinValue) proteinValue.textContent = food.protein + ' ' + t.grams;
    if (fatValue)     fatValue.textContent     = food.fat + ' ' + t.grams;
    if (carbValue)    carbValue.textContent    = food.carb + ' ' + t.grams;
    if (healthTipEl)  healthTipEl.textContent  = 'ğŸ‘ ' + t.loading + ' ' + lang.tip;

    if (recipeList) {
      recipeList.innerHTML = '';
      if (lang.recipes && lang.recipes.length > 0) {
        // å»¶è¿Ÿæ˜¾ç¤ºæ­é…æ¨èï¼Œæ¨¡æ‹ŸåŠ è½½æ•ˆæœ
        setTimeout(() => {
          if (healthTipEl) healthTipEl.textContent = 'ğŸ‘ ' + lang.tip;
          lang.recipes.forEach(r => {
            const li = document.createElement('li');
            li.textContent = r;
            recipeList.appendChild(li);
          });
        }, 300);
      } else {
        // å¦‚æœæ²¡æœ‰æ­é…æ¨èï¼Œæ˜¾ç¤ºé»˜è®¤ä¿¡æ¯
        setTimeout(() => {
          if (healthTipEl) healthTipEl.textContent = 'ğŸ‘ ' + lang.tip;
          const defaultRecipes = currentLang === 'zh' ? [
            `${food.icon} ${lang.name} + ğŸ¥¬ è”¬èœï¼ˆå¢åŠ çº¤ç»´æ‘„å…¥ï¼‰`,
            `${food.icon} ${lang.name} + ğŸ æ°´æœï¼ˆç»´ç”Ÿç´ è¡¥å……ï¼‰`,
            `${food.icon} ${lang.name} + ğŸš ä¸»é£Ÿï¼ˆå‡è¡¡è†³é£Ÿï¼‰`
          ] : [
            `${food.icon} ${lang.name} + ğŸ¥¬ ì±„ì†Œï¼ˆì„¬ìœ ì§ˆ ì„­ì·¨ ì¦ê°€ï¼‰`,
            `${food.icon} ${lang.name} + ğŸ ê³¼ì¼ï¼ˆë¹„íƒ€ë¯¼ ë³´ì¶©ï¼‰`,
            `${food.icon} ${lang.name} + ğŸš ì£¼ì‹ï¼ˆê· í˜• ì¡íŒ ì‹ì‚¬ï¼‰`
          ];
          
          defaultRecipes.forEach(r => {
            const li = document.createElement('li');
            li.textContent = r;
            recipeList.appendChild(li);
          });
        }, 300);
      }
    }

    if (foodDetail)  foodDetail.style.display = 'block';
    if (emptyHintEl) emptyHintEl.style.display = 'none';
  }

  function updateStats (food) {
    searchCount += 1;
    sumCal += food.kcal;
    if (food.level === 'good') healthyCount += 1;
    if (food.level === 'warn') warningCount += 1;

    const t = TEXTS[currentLang];
    
    if (statSearchCountEl) statSearchCountEl.textContent = String(searchCount);
    if (statAvgCalEl) {
      const avg = searchCount ? (sumCal / searchCount).toFixed(1) : 0;
      statAvgCalEl.textContent = avg + ' ' + t.kcal;
    }
    if (statHealthyCountEl) statHealthyCountEl.textContent = String(healthyCount);
    if (statWarningCountEl) statWarningCountEl.textContent = String(warningCount);

    // æ›´æ–°é£Ÿå“æœç´¢æ’è¡Œæ¦œ
    const userName = document.getElementById('welcomeNameInput')?.value || 'è®¿å®¢';
    const foodName = food[currentLang]?.name || food.id;
    rankingSystem.updateFoodRanking(food.id, foodName);
  }

  function updateMyRankDisplay() {
    const userName = document.getElementById('welcomeNameInput')?.value || 'è®¿å®¢';
    const { myFoodRank, myGameRank } = rankingSystem.getMyRanks(userName);
    
    if (myFoodRankEl) myFoodRankEl.textContent = myFoodRank;
    if (myGameRankEl) myGameRankEl.textContent = myGameRank;
  }

  function handleSearch () {
    if (!foodInput) return;
    const val = foodInput.value;
    const food = findFoodByInput(val);
    if (!food) {
      if (foodDetail)  foodDetail.style.display = 'none';
      if (emptyHintEl) {
        emptyHintEl.style.display = 'block';
        emptyHintEl.textContent = TEXTS[currentLang].emptyHint;
      }
      return;
    }
    renderFood(food);
    updateStats(food);
    updateMyRankDisplay();
  }

  if (searchBtn && foodInput) {
    searchBtn.addEventListener('click', handleSearch);
    foodInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') handleSearch();
    });
  }

  chips.forEach(chip => {
    chip.addEventListener('click', () => {
      const key = chip.dataset.key || chip.textContent.trim();
      if (foodInput) foodInput.value = key;
      const food = findFoodByInput(key);
      if (food) {
        renderFood(food);
        updateStats(food);
        updateMyRankDisplay();
      } else {
        handleSearch();
      }
    });
  });

  /* ===================== å°æ¸¸æˆç³»ç»Ÿ ===================== */
  const MAX_LEVEL = 2;
  let currentLevel = 1;

  const ROWS = 4;
  const COLS = 6;
  let grid = [];

  let gameRunning = false;
  let timerId = null;
  let timeLeft = 60;
  let openedCard = null;
  let matchedPairs = 0;
  let totalPairs = 0;

  function getLevelTime() {
    return currentLevel === 1 ? 60 : 45;
  }

  function resetGameState () {
    gameRunning = false;
    if (timerId) clearInterval(timerId);
    timerId = null;
    timeLeft = getLevelTime();
    openedCard = null;
    matchedPairs = 0;

    const t = TEXTS[currentLang];
    if (matchCountText) {
      matchCountText.textContent = t.matchPrefix + '0' + t.matchSuffix;
    }
    if (timerTextEl) {
      timerTextEl.textContent = t.timerPrefix + timeLeft + t.timerSuffix;
    }
    if (gameLevelText) {
      gameLevelText.textContent = currentLevel === 1 ? t.gameLevel1 : t.gameLevel2;
    }
  }

  function buildBoardForCurrentLevel () {
    if (!gameBoard) return;
    gameBoard.innerHTML = '';
    resetGameState();

    // ä»36ç§é£Ÿç‰©ä¸­éšæœºé€‰æ‹©6ç§ï¼Œæ¯ç§4å¼ 
    const allFoods = FOOD_ITEMS_WITH_RECIPES.map(f => f.id);
    const selectedFoods = [];
    while (selectedFoods.length < 6) {
      const randomId = allFoods[Math.floor(Math.random() * allFoods.length)];
      if (!selectedFoods.includes(randomId)) {
        selectedFoods.push(randomId);
      }
    }

    const cards = [];
    selectedFoods.forEach(id => {
      // æ¯ç§é£Ÿç‰©4å¼ 
      cards.push(id, id, id, id);
    });

    // æ´—ç‰Œ
    for (let i = cards.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [cards[i], cards[j]] = [cards[j], cards[i]];
    }

    grid = Array.from({ length: ROWS }, () => Array(COLS).fill(null));

    cards.forEach((id, index) => {
      const food = FOOD_BY_ID[id];
      if (!food) return;
      const r = Math.floor(index / COLS);
      const c = index % COLS;
      const div = document.createElement('div');
      div.className = 'tile game-card';
      div.dataset.foodId = id;
      div.dataset.row = String(r);
      div.dataset.col = String(c);
      div.textContent = food.icon;
      gameBoard.appendChild(div);
      grid[r][c] = { id, el: div };
    });
    
    totalPairs = 12; // 24å¼ å¡ç‰‡ = 12å¯¹
  }

  function startTimer () {
    if (!timerTextEl) return;
    const tText = TEXTS[currentLang];
    timerTextEl.textContent = tText.timerPrefix + timeLeft + tText.timerSuffix;
    timerId = setInterval(() => {
      timeLeft -= 1;
      if (timeLeft < 0) timeLeft = 0;
      timerTextEl.textContent = tText.timerPrefix + timeLeft + tText.timerSuffix;
      if (timeLeft <= 0) {
        clearInterval(timerId);
        gameRunning = false;
        showToast(currentLang === 'zh'
          ? 'æ—¶é—´åˆ°å•¦ï¼Œæœ¬å…³ç»“æŸ~'
          : 'ì‹œê°„ ì¢…ë£Œ!');
      }
    }, 1000);
  }

  function startGame () {
    buildBoardForCurrentLevel();
    gameRunning = true;
    timeLeft = getLevelTime();
    const t = TEXTS[currentLang];
    if (gameLevelText) {
      gameLevelText.textContent = currentLevel === 1 ? t.gameLevel1 : t.gameLevel2;
    }
    if (timerTextEl) {
      timerTextEl.textContent = t.timerPrefix + timeLeft + t.timerSuffix;
    }
    startTimer();
  }

  if (gameStartBtn) {
    gameStartBtn.addEventListener('click', () => {
      currentLevel = 1;
      startGame();
    });
  }

  if (gameHelpBtn) {
    gameHelpBtn.addEventListener('click', () => {
      openModal('intro');
    });
  }

  if (gameModalPrimaryBtn) {
    gameModalPrimaryBtn.addEventListener('click', () => {
      if (modalState === 'intro') {
        closeModal();
        currentLevel = 1;
        startGame();
      } else if (modalState === 'levelClear') {
        closeModal();
        currentLevel += 1;
        startGame();
      } else if (modalState === 'allClear') {
        closeModal();
      }
    });
  }

  if (gameModalSecondaryBtn) {
    gameModalSecondaryBtn.addEventListener('click', () => {
      closeModal();
    });
  }

  if (gameBoard) {
    gameBoard.addEventListener('click', (e) => {
      const card = e.target.closest('.game-card');
      if (!card || !gameRunning) return;
      if (card.classList.contains('matched')) return;

      const row = Number(card.dataset.row);
      const col = Number(card.dataset.col);

      if (!openedCard) {
        openedCard = { el: card, row, col };
        card.classList.add('selected');
        return;
      }

      if (openedCard.el === card) return;

      const id1 = openedCard.el.dataset.foodId;
      const id2 = card.dataset.foodId;

      const t = TEXTS[currentLang];

      if (id1 === id2) {
        // åŒ¹é…æˆåŠŸ
        openedCard.el.classList.remove('selected');
        openedCard.el.classList.add('matched');
        card.classList.add('matched');
        // ä»ç½‘æ ¼ä¸­æ¸…é™¤
        grid[openedCard.row][openedCard.col] = null;
        grid[row][col] = null;

        matchedPairs += 1;

        const food = FOOD_BY_ID[id1];
        if (food) {
          const tip = food[currentLang].gameTip;
          showToast(tip);
        }

        if (matchCountText) {
          matchCountText.textContent = t.matchPrefix + matchedPairs + t.matchSuffix;
        }

        if (matchedPairs >= totalPairs) {
          gameRunning = false;
          if (timerId) clearInterval(timerId);
          
          // è®¡ç®—å¾—åˆ†ï¼šå‰©ä½™æ—¶é—´ + å…³å¡åŠ æˆ
          const score = timeLeft * 10 + currentLevel * 100;
          
          // æ›´æ–°æ¸¸æˆæ’è¡Œæ¦œ
          const userName = document.getElementById('welcomeNameInput')?.value || 'è®¿å®¢';
          rankingSystem.updateGameRanking(userName, score, currentLevel);
          updateMyRankDisplay();

          // é€šå…³å¼¹çª—
          if (currentLevel < MAX_LEVEL) {
            openModal('levelClear');
          } else {
            openModal('allClear');
          }
        }
      } else {
        // ä¸åŒ¹é…ï¼šæ‰£ 3 ç§’
        openedCard.el.classList.remove('selected');
        timeLeft = Math.max(0, timeLeft - 3);
        if (timerTextEl) {
          timerTextEl.textContent = t.timerPrefix + timeLeft + t.timerSuffix;
        }
        showToast(t.wrongPenalty);
        if (timeLeft <= 0) {
          if (timerId) clearInterval(timerId);
          gameRunning = false;
        }
      }

      openedCard = null;
    });
  }

  /* ===================== åˆå§‹åŒ– ===================== */
  setLanguage('zh');
  showSection('section-search');
  
  // åˆå§‹æ¸²æŸ“æ’è¡Œæ¦œ
  rankingSystem.renderFoodRanking();
  rankingSystem.renderGameRanking();
  updateMyRankDisplay();
})();
</script>
</body>
</html>
