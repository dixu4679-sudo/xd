<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>å¥åº·é¥®é£Ÿé€‰æ‹©åŠ©æ‰‹ Â· Healthy Food Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      /* æ¢å¤åŸæ¥çš„é¢œè‰²æ–¹æ¡ˆ */
      --bg: #fffef5;
      --bg-soft: #f8faff;
      --card: #ffffff;

      --primary: #5d8aff;
      --primary-soft: #e8f0ff;

      --accent-yellow: #ffc145;
      --accent-yellow-soft: #fff5e0;

      --accent-blue: #5d8aff;
      --accent-blue-soft: #e8f0ff;

      --danger: #ff7675;
      --success: #00b894;
      --warning: #f6a44c;

      --text-main: #2d3436;
      --text-sub: #636e72;

      --border-soft: #e3e7f0;
      --shadow-soft: 0 18px 45px rgba(170, 188, 212, 0.24);
    }

    * {
      box-sizing: border-box;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Helvetica Neue",
        Arial, "Noto Sans CJK SC", "Noto Sans KR", sans-serif;
    }

    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: radial-gradient(circle at top, #fff8e5 0, #fffef5 45%, #f4f7ff 100%);
      color: var(--text-main);
    }

    .app {
      max-width: 1200px;
      margin: 0 auto;
      padding: 16px 12px 32px;
    }

    /* ========== æ¬¢è¿å¼¹çª—ï¼ˆç¬¬ä¸€é¡µï¼‰ ========== */
    .welcome-overlay {
      position: fixed;
      inset: 0;
      background: radial-gradient(circle at top, #fff8e5 0, #fffef5 50%, #ffffff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 20;
    }

    .welcome-card {
      width: 640px;
      max-width: 92vw;
      background: #ffffff;
      border-radius: 26px;
      box-shadow: var(--shadow-soft);
      padding: 26px 32px 26px;
      display: flex;
      flex-direction: column;
      gap: 18px;
      position: relative;
    }

    .welcome-tag {
      position: absolute;
      top: 18px;
      right: 22px;
      font-size: 11px;
      padding: 3px 8px;
      border-radius: 999px;
      background: var(--accent-yellow-soft);
      color: var(--accent-yellow);
    }

    .welcome-header {
      display: flex;
      gap: 14px;
      align-items: center;
    }

    .welcome-icon {
      width: 52px;
      height: 52px;
      border-radius: 20px;
      background: radial-gradient(circle at 30% 20%, #fff9e6 0, #ffe7a8 40%, #c5d8ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 30px;
    }

    .welcome-title-block h1 {
      margin: 0;
      font-size: 22px;
      font-weight: 700;
    }

    .welcome-subtitle {
      margin: 4px 0 0;
      font-size: 13px;
      color: var(--text-sub);
    }

    .welcome-form {
      margin-top: 6px;
      display: flex;
      flex-direction: column;
      gap: 14px;
    }

    .field-label {
      font-size: 13px;
      margin-bottom: 4px;
    }

    .welcome-input {
      width: 100%;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 9px 14px;
      font-size: 14px;
      outline: none;
      background: #fbfcff;
    }

    .welcome-input:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 2px rgba(93, 138, 255, 0.25);
      background: #ffffff;
    }

    .welcome-btn-row {
      display: flex;
      gap: 10px;
      align-items: center;
      margin-top: 4px;
    }

    .btn-primary {
      border-radius: 999px;
      border: none;
      padding: 9px 20px;
      font-size: 14px;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #fff;
      box-shadow: 0 10px 22px rgba(93, 138, 255, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .btn-primary:hover {
      filter: brightness(1.03);
      transform: translateY(-1px);
    }

    .welcome-tip {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 2px;
    }

    @media (max-width: 720px) {
      .welcome-card {
        padding: 22px 18px 20px;
      }
    }

    /* ========== ä¸»å¸ƒå±€ï¼šå·¦ä¾§å¯¼èˆª + å³ä¾§å†…å®¹ ========== */
    .layout {
      margin-top: 80px;
      display: flex;
      gap: 16px;
      min-height: 520px;
    }

    .sidebar {
      width: 230px;
      min-width: 210px;
      border-radius: 20px;
      background: linear-gradient(160deg, rgba(255, 248, 227, 0.98), rgba(240, 246, 255, 0.98));
      border: 1px solid rgba(255, 230, 184, 0.85);
      box-shadow: 0 14px 40px rgba(216, 189, 211, 0.45);
      padding: 16px 14px;
      display: flex;
      flex-direction: column;
      gap: 12px;
      position: relative;
      overflow: hidden;
    }

    .sidebar::before {
      content: "";
      position: absolute;
      width: 120px;
      height: 120px;
      border-radius: 50%;
      background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0, rgba(255, 255, 255, 0) 70%);
      top: -40px;
      right: -30px;
      opacity: 0.7;
    }

    .sidebar-header {
      display: flex;
      align-items: center;
      gap: 8px;
      position: relative;
      z-index: 1;
    }

    .sidebar-logo {
      width: 36px;
      height: 36px;
      border-radius: 16px;
      background: radial-gradient(circle at 30% 20%, #fff, #ffe9b3 60%, #c5d8ff 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .sidebar-title {
      font-size: 15px;
      font-weight: 700;
    }

    .sidebar-sub {
      font-size: 11px;
      color: var(--text-sub);
    }

    .sidebar-user {
      margin-top: 6px;
      padding: 8px 10px;
      border-radius: 14px;
      background: rgba(255, 255, 255, 0.95);
      border: 1px dashed rgba(255, 212, 168, 0.9);
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 2px;
      position: relative;
      z-index: 1;
    }

    .sidebar-user strong {
      font-size: 13px;
    }

    .nav-section-label {
      margin-top: 4px;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      color: var(--text-sub);
      opacity: 0.9;
    }

    .nav-btns {
      display: flex;
      flex-direction: column;
      gap: 6px;
      margin-top: 4px;
      position: relative;
      z-index: 1;
    }

    .nav-btn {
      border-radius: 999px;
      border: none;
      padding: 7px 11px;
      font-size: 13px;
      text-align: left;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      background: rgba(255, 255, 255, 0.9);
      color: var(--text-main);
      border: 1px solid rgba(255, 230, 184, 0.8);
    }

    .nav-btn span.icon {
      font-size: 16px;
    }

    .nav-btn.active {
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #ffffff;
      border-color: transparent;
      box-shadow: 0 10px 22px rgba(93, 138, 255, 0.55);
    }

    .nav-btn.active .icon {
      transform: translateY(-0.5px);
    }

    .nav-footer {
      margin-top: auto;
      font-size: 11px;
      color: var(--text-sub);
      opacity: 0.9;
      z-index: 1;
    }

    .nav-logout {
      margin-top: 6px;
      font-size: 11px;
      color: #ff6b81;
      cursor: pointer;
      text-decoration: underline;
    }

    /* å³ä¾§å†…å®¹åŒºåŸŸ */
    .content {
      flex: 1;
      border-radius: 24px;
      background: rgba(255, 255, 255, 0.96);
      box-shadow: var(--shadow-soft);
      border: 1px solid rgba(227, 233, 248, 0.8);
      padding: 16px 18px 18px;
      min-width: 0;
    }

    .content-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 10px;
      margin-bottom: 10px;
    }

    .content-title-block h2 {
      margin: 0;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .content-title-block p {
      margin: 3px 0 0;
      font-size: 12px;
      color: var(--text-sub);
    }

    .chip-soft {
      font-size: 11px;
      padding: 2px 7px;
      border-radius: 999px;
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
    }

    .section {
      display: none;
    }

    .section.active {
      display: block;
    }

    /* ========= æŸ¥è¯¢é¡µæ ·å¼ ========= */
    .search-row {
      display: flex;
      gap: 8px;
      flex-wrap: wrap;
      margin-bottom: 10px;
    }

    .search-input {
      flex: 1;
      min-width: 180px;
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 8px 12px;
      font-size: 14px;
      outline: none;
      background: #fbfcff;
    }

    .search-input:focus {
      border-color: var(--accent-blue);
      box-shadow: 0 0 0 2px rgba(93, 138, 255, 0.25);
      background: #ffffff;
    }

    .btn-soft {
      border-radius: 999px;
      border: none;
      padding: 8px 13px;
      font-size: 13px;
      cursor: pointer;
      background: #f4f6ff;
      color: var(--accent-blue);
      border: 1px solid #dfe7ff;
    }

    .btn-soft:hover {
      background: #e7ecff;
    }

    .chip-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 10px;
    }

    .food-chip {
      border-radius: 999px;
      border: 1px solid var(--border-soft);
      padding: 4px 10px;
      font-size: 12px;
      color: var(--text-sub);
      background: #fafbff;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
    }

    .food-chip:hover {
      border-color: var(--accent-blue);
      color: var(--accent-blue);
      background: #f1f4ff;
    }

    .food-summary {
      font-size: 14px;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .result-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 10px;
      margin-top: 6px;
    }

    .stat-box {
      border-radius: 16px;
      padding: 10px 12px;
      background: #f9fbff;
      border: 1px solid #e2e8ff;
      font-size: 12px;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }

    .stat-label {
      color: var(--text-sub);
      font-size: 11px;
    }

    .stat-value {
      font-weight: 600;
      font-size: 14px;
    }

    .small-badge {
      font-size: 11px;
      padding: 1px 6px;
      border-radius: 999px;
      background: #eef1ff;
      color: var(--accent-blue);
      margin-left: 4px;
    }

    .tips {
      font-size: 12px;
      line-height: 1.5;
    }

    .recipes {
      margin-top: 8px;
      font-size: 12px;
    }

    .recipes h4 {
      margin: 0 0 4px;
      font-size: 12px;
    }

    .recipes ul {
      margin: 2px 0 0;
      padding-left: 18px;
    }

    .empty-hint {
      font-size: 13px;
      color: var(--text-sub);
      margin-top: 6px;
    }

    /* ========= å°æ¸¸æˆ åŒºåŸŸ ========= */
    .game-container {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .game-instructions {
      background: var(--accent-yellow-soft);
      border: 1px solid rgba(255, 193, 69, 0.3);
      border-radius: 12px;
      padding: 12px 16px;
      font-size: 13px;
      line-height: 1.5;
      margin-bottom: 10px;
    }

    .game-instructions h4 {
      margin: 0 0 6px 0;
      color: var(--accent-yellow);
      font-size: 13px;
    }

    .game-instructions ul {
      margin: 4px 0 0;
      padding-left: 18px;
    }

    .game-instructions li {
      margin-bottom: 2px;
    }

    .game-top-row {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 10px;
      margin-bottom: 8px;
      font-size: 13px;
    }

    .game-pill {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 9px;
      border-radius: 999px;
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
      font-size: 12px;
    }

    .game-info {
      font-size: 12px;
      color: var(--text-sub);
    }

    .btn-game {
      border-radius: 999px;
      border: none;
      padding: 7px 14px;
      font-size: 13px;
      cursor: pointer;
      background: linear-gradient(135deg, var(--primary), #7da2ff);
      color: #fff;
      box-shadow: 0 10px 20px rgba(93, 138, 255, 0.45);
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .game-board {
      margin-top: 10px;
      background: #fafbff;
      border-radius: 18px;
      border: 1px solid #e1e6ff;
      padding: 10px;
      display: grid;
      grid-template-columns: repeat(6, 1fr);
      gap: 6px;
      max-width: 500px;
      margin: 0 auto;
    }

    .tile {
      aspect-ratio: 1;
      border-radius: 12px;
      background: #ffffff;
      border: 2px solid #e0e5ff;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(193, 206, 255, 0.25);
      transition: all 0.15s ease;
    }

    .tile:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 12px rgba(118, 165, 255, 0.3);
    }

    .tile.selected {
      border-color: var(--accent-blue);
      background: var(--accent-blue-soft);
      transform: scale(1.08);
      box-shadow: 0 8px 16px rgba(93, 138, 255, 0.4);
    }

    .tile.matched {
      visibility: hidden;
      pointer-events: none;
    }

    .game-status-row {
      margin-top: 8px;
      font-size: 12px;
      color: var(--text-sub);
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      align-items: center;
      justify-content: center;
    }

    .badge-soft {
      padding: 2px 8px;
      border-radius: 999px;
      background: #f4f7ff;
      border: 1px solid #dde4ff;
      font-size: 11px;
    }

    /* ========= ç»Ÿè®¡é¡µ ========= */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
      gap: 8px;
      margin-top: 6px;
      font-size: 12px;
    }

    .stat-card {
      border-radius: 16px;
      padding: 9px 11px;
      background: #f9fbff;
      border: 1px solid #e1e6ff;
    }

    .stat-card .stat-label {
      font-size: 11px;
      color: var(--text-sub);
    }

    .stat-card .stat-value {
      font-size: 14px;
      font-weight: 600;
    }

    .top-foods-list {
      list-style: none;
      padding: 0;
      margin: 6px 0 0;
      font-size: 12px;
    }

    .top-foods-list li {
      display: flex;
      justify-content: space-between;
      padding: 3px 0;
      border-bottom: 1px dashed #ecf0f1;
    }

    .top-foods-list li span.count {
      color: var(--accent-blue);
      font-weight: 600;
    }

    /* ========= æ’è¡Œæ¦œé¡µ ========= */
    .leaderboard-container {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin-top: 16px;
    }

    .leaderboard-card {
      background: #f9fbff;
      border-radius: 16px;
      border: 1px solid #e1e6ff;
      overflow: hidden;
    }

    .leaderboard-header {
      background: var(--accent-blue-soft);
      padding: 12px 16px;
      font-size: 13px;
      font-weight: 600;
      color: var(--accent-blue);
      border-bottom: 1px solid #e1e6ff;
    }

    .leaderboard-list {
      max-height: 300px;
      overflow-y: auto;
    }

    .leaderboard-item {
      padding: 10px 16px;
      border-bottom: 1px dashed #ecf0f1;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .leaderboard-item:last-child {
      border-bottom: none;
    }

    .rank-number {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      background: var(--accent-blue-soft);
      color: var(--accent-blue);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 11px;
      font-weight: 600;
    }

    .rank-number.top-1 { background: gold; color: #333; }
    .rank-number.top-2 { background: silver; color: #333; }
    .rank-number.top-3 { background: #cd7f32; color: white; }

    .item-info {
      flex: 1;
    }

    .item-name {
      font-weight: 600;
      font-size: 13px;
    }

    .item-details {
      font-size: 11px;
      color: var(--text-sub);
      margin-top: 2px;
    }

    /* é£Ÿç‰©çŸ¥è¯†æç¤º */
    .food-tip-toast {
      position: fixed;
      left: 50%;
      bottom: 32px;
      transform: translateX(-50%) translateY(16px);
      background: rgba(255, 255, 255, 0.97);
      color: var(--text-main);
      padding: 12px 18px;
      border-radius: 14px;
      font-size: 13px;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.3s ease, transform 0.3s ease;
      z-index: 50;
      border: 1px solid #e3e7ff;
      box-shadow: 0 12px 32px rgba(93, 138, 255, 0.3);
      max-width: 400px;
      width: 90%;
      text-align: center;
    }

    .food-tip-toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    .food-tip-toast .food-icon {
      font-size: 20px;
      margin-right: 8px;
      vertical-align: middle;
    }

    .food-tip-toast .tip-content {
      display: inline-block;
      vertical-align: middle;
    }

    footer {
      margin-top: 16px;
      font-size: 11px;
      text-align: center;
      color: var(--text-sub);
    }

    @media (max-width: 860px) {
      .layout {
        flex-direction: column;
      }
      .sidebar {
        flex-direction: row;
        align-items: center;
        width: 100%;
        min-height: 84px;
        border-radius: 18px;
      }
      .sidebar-header {
        flex: 1;
      }
      .sidebar-user,
      .nav-section-label,
      .nav-footer {
        display: none;
      }
      .nav-btns {
        flex-direction: row;
        flex: 1;
        justify-content: flex-end;
      }
      .nav-btn {
        font-size: 12px;
        padding-inline: 10px;
      }
      .content {
        margin-top: 4px;
      }
      .game-board {
        grid-template-columns: repeat(6, 1fr);
        max-width: 450px;
      }
    }

    @media (max-width: 480px) {
      .game-board {
        grid-template-columns: repeat(4, 1fr);
        max-width: 300px;
      }
    }
  </style>
</head>
<body>
<div class="app">
  <!-- ===== æ¬¢è¿é¡µ ===== -->
  <div class="welcome-overlay" id="welcomeOverlay">
    <div class="welcome-card">
      <div class="welcome-tag">å¥åº·åŠ©æ‰‹</div>
      <div class="welcome-header">
        <div class="welcome-icon">ğŸ¥—</div>
        <div class="welcome-title-block">
          <h1>å¥åº·é¥®é£Ÿé€‰æ‹©åŠ©æ‰‹</h1>
          <p class="welcome-subtitle">
            ç®€å•è®°å½•ä½ çš„é£Ÿç‰©æŸ¥è¯¢ï¼Œè·å¾—æ›´å¥åº·çš„é¥®é£Ÿå»ºè®®ï¼Œè¿˜å¯ä»¥é€šè¿‡å°æ¸¸æˆå­¦ä¹ è¥å…»çŸ¥è¯†ã€‚
          </p>
        </div>
      </div>

      <div class="welcome-form">
        <div>
          <div class="field-label">æ˜µç§° / å­¦å·</div>
          <input id="welcomeNameInput" class="welcome-input"
                 placeholder="ä¾‹å¦‚ï¼šå°ç•ªèŒ„åŒå­¦ã€2025xxx" />
        </div>

        <div class="welcome-btn-row">
          <button class="btn-primary" id="welcomeStartBtn">
            <span>âœ¨</span><span>è¿›å…¥å°åŠ©æ‰‹</span>
          </button>
        </div>

        <div class="welcome-tip">
          æç¤ºï¼šç³»ç»Ÿä¼šç”¨ä½ å¡«å†™çš„æ˜µç§°è®°å½•æŸ¥è¯¢è¡Œä¸ºå’Œå°æ¸¸æˆæˆç»©ï¼Œä»…ç”¨äºè¯¾å ‚å±•ç¤ºã€‚
        </div>
      </div>
    </div>
  </div>

  <!-- ===== ä¸»å¸ƒå±€ï¼šå·¦ä¾§å¯¼èˆª + å³ä¾§å†…å®¹ ===== -->
  <div class="layout" id="mainLayout" style="opacity:0.25;pointer-events:none;">
    <aside class="sidebar">
      <div class="sidebar-header">
        <div class="sidebar-logo">ğŸ¥—</div>
        <div>
          <div class="sidebar-title">å¥åº·é¥®é£ŸåŠ©æ‰‹</div>
          <div class="sidebar-sub">Food Â· Stats Â· Game</div>
        </div>
      </div>

      <div class="sidebar-user">
        <div id="sideUserLine"><strong>è®¿å®¢</strong></div>
      </div>

      <div class="nav-section-label">åŠŸèƒ½ / Features</div>
      <div class="nav-btns">
        <button class="nav-btn active" data-target="section-search">
          <span class="icon">ğŸ”</span><span>é£Ÿç‰©æŸ¥è¯¢</span>
        </button>
        <button class="nav-btn" data-target="section-stats">
          <span class="icon">ğŸ“Š</span><span>æ•°æ®ç»Ÿè®¡</span>
        </button>
        <button class="nav-btn" data-target="section-leaderboard">
          <span class="icon">ğŸ†</span><span>æ’è¡Œæ¦œ</span>
        </button>
        <button class="nav-btn" data-target="section-game">
          <span class="icon">ğŸ®</span><span>è¿è¿çœ‹æ¸¸æˆ</span>
        </button>
      </div>

      <div class="nav-footer">
        <div>å°å°ç½‘é¡µå®éªŒ Â· ä»…è¯¾å ‚å±•ç¤ºä½¿ç”¨ã€‚</div>
        <div class="nav-logout" id="navLogout">é‡æ–°ç™»å½•</div>
      </div>
    </aside>

    <main class="content">
      <!-- é¡¶éƒ¨æ ‡é¢˜ -->
      <div class="content-header">
        <div class="content-title-block">
          <h2 id="contentTitle"><span>ğŸ”</span><span id="contentTitleText">é£Ÿç‰©æŸ¥è¯¢</span></h2>
          <p id="contentSubtitle">
            è¾“å…¥å¸¸è§é£Ÿç‰©åç§°ï¼ŒæŸ¥çœ‹çƒ­é‡ä¸è¥å…»ç»“æ„ï¼Œå¹¶å¾—åˆ°ç®€å•å¥åº·å»ºè®®ã€‚
          </p>
        </div>
        <div class="chip-soft">å¥åº·é¥®é£Ÿ mini demo</div>
      </div>

      <!-- ========== Section 1ï¼šé£Ÿç‰©æŸ¥è¯¢ ========== -->
      <section class="section active" id="section-search">
        <div class="search-row">
          <input id="foodInput" class="search-input" placeholder="è¾“å…¥é£Ÿç‰©ï¼Œå¦‚ï¼šè‹¹æœã€ç‰›å¥¶ã€é¸¡èƒ¸è‚‰" />
          <button class="btn-soft" id="searchBtn">æœç´¢</button>
        </div>

        <div class="chip-row">
          <div class="food-chip" data-key="è‹¹æœ">ğŸ è‹¹æœ</div>
          <div class="food-chip" data-key="ç±³é¥­">ğŸš ç±³é¥­</div>
          <div class="food-chip" data-key="ç‰›å¥¶">ğŸ¥› ç‰›å¥¶</div>
          <div class="food-chip" data-key="é¸¡èƒ¸è‚‰">ğŸ— é¸¡èƒ¸è‚‰</div>
          <div class="food-chip" data-key="èƒ¡èåœ">ğŸ¥• èƒ¡èåœ</div>
          <div class="food-chip" data-key="å¯ä¹">ğŸ¥¤ å¯ä¹</div>
          <div class="food-chip" data-key="é¸¡è›‹">ğŸ¥š é¸¡è›‹</div>
          <div class="food-chip" data-key="è¥¿å…°èŠ±">ğŸ¥¦ è¥¿å…°èŠ±</div>
        </div>

        <div id="foodResultArea"></div>

        <div id="foodDetail" style="display:none;">
          <div class="result-grid">
            <div class="stat-box">
              <span class="stat-label">çƒ­é‡</span>
              <span class="stat-value" id="calorieValue">120 kcal</span>
            </div>

            <div class="stat-box">
              <span class="stat-label">è›‹ç™½è´¨</span>
              <span class="stat-value" id="proteinValue">6 g</span>
            </div>

            <div class="stat-box">
              <span class="stat-label">è„‚è‚ª</span>
              <span class="stat-value" id="fatValue">1.3 g</span>
            </div>

            <div class="stat-box">
              <span class="stat-label">ç¢³æ°´åŒ–åˆç‰©</span>
              <span class="stat-value" id="carbValue">20 g</span>
            </div>
          </div>

          <div class="tips" id="healthTip" style="margin-top:10px;">
            ğŸ‘ å»ºè®®ï¼šæ°´æœå¯Œå«ç»´ç”Ÿç´ ï¼Œå¯ä½œä¸ºåŠ é¤ï¼Œä½†è¦é¿å…ä¸€æ¬¡åƒå¤ªå¤šã€‚
          </div>

          <div class="recipes">
            <h4>æ¨èæ­é…ï¼š</h4>
            <ul id="recipeList">
              <li>ğŸ è‹¹æœ + ğŸ¥› ç‰›å¥¶ï¼ˆå¢å¼ºé¥±è…¹æ„Ÿï¼‰</li>
              <li>ğŸ è‹¹æœ + ğŸ¥œ åšæœï¼ˆç»´ç”Ÿç´  + å¥åº·è„‚è‚ªï¼‰</li>
            </ul>
          </div>
        </div>

        <div class="empty-hint" id="emptyHint" style="display:none;">æœªæŸ¥è¯¢åˆ°è¯¥é£Ÿç‰©ï¼Œè¯·å°è¯•å…¶ä»–å…³é”®è¯ã€‚</div>
      </section>

      <!-- ========== Section 2ï¼šæ•°æ®ç»Ÿè®¡ ========== -->
      <section class="section" id="section-stats">
        <div class="content-header">
          <h2 class="content-title">æ•°æ®ç»Ÿè®¡</h2>
          <p class="content-subtitle">æ ¹æ®ä½ åœ¨æœ¬æ¬¡ä½¿ç”¨ä¸­çš„é£Ÿç‰©æŸ¥è¯¢ç»“æœï¼Œç»™å‡ºä¸€äº›ç®€å•çš„ç»Ÿè®¡æŒ‡æ ‡</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-label">ç´¯è®¡æŸ¥è¯¢æ¬¡æ•°</div>
            <div class="stat-value" id="statSearchCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">å¹³å‡çƒ­é‡ï¼ˆæŸ¥è¯¢é£Ÿç‰©ï¼‰</div>
            <div class="stat-value" id="statAvgCal">0 kcal</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">è¾ƒå¥åº·é€‰æ‹©æ¬¡æ•°</div>
            <div class="stat-value" id="statHealthyCount">0</div>
          </div>
          <div class="stat-card">
            <div class="stat-label">éœ€è¦æ³¨æ„çš„é£Ÿç‰©</div>
            <div class="stat-value" id="statWarningCount">0</div>
          </div>
        </div>

        <div class="card">
          <h3>æœ¬æ¬¡æŸ¥è¯¢ä¸­å‡ºç°æœ€å¤šçš„é£Ÿç‰© TOP 3</h3>
          <ul class="top-foods-list" id="topFoodsList">
            <li class="empty-hint">è¿˜æ²¡æœ‰æ•°æ®ï¼Œå¯ä»¥å…ˆå»ä¸Šæ–¹çš„ã€Œé£Ÿç‰©æŸ¥è¯¢ã€ç©ä¸€ç©ã€‚</li>
          </ul>
        </div>
      </section>

      <!-- ========== Section 3ï¼šæ’è¡Œæ¦œ ========== -->
      <section class="section" id="section-leaderboard">
        <div class="content-header">
          <h2 class="content-title">æ’è¡Œæ¦œ</h2>
          <p class="content-subtitle">æŸ¥çœ‹é£Ÿç‰©æŸ¥è¯¢å’Œæ¸¸æˆæˆç»©çš„æ’å</p>
        </div>

        <div class="leaderboard-container">
          <div class="leaderboard-card">
            <div class="leaderboard-header">ğŸ” é£Ÿç‰©æŸ¥è¯¢æ’è¡Œæ¦œ</div>
            <div class="leaderboard-list" id="foodLeaderboard">
              <div class="leaderboard-item">
                <div class="item-info">
                  <div class="item-name">æš‚æ— æ•°æ®</div>
                  <div class="item-details">å¿«å»æŸ¥è¯¢ä¸€äº›é£Ÿç‰©å§</div>
                </div>
              </div>
            </div>
          </div>

          <div class="leaderboard-card">
            <div class="leaderboard-header">ğŸ† æ¸¸æˆè®°å½•æ’è¡Œæ¦œ</div>
            <div class="leaderboard-list" id="gameLeaderboard">
              <div class="leaderboard-item">
                <div class="item-info">
                  <div class="item-name">æš‚æ— æ•°æ®</div>
                  <div class="item-details">å¿«å»ç©è¿è¿çœ‹æ¸¸æˆå§</div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- ========== Section 4ï¼šè¿è¿çœ‹æ¸¸æˆ ========== -->
      <section class="section" id="section-game">
        <div class="game-container">
          <!-- æ¸¸æˆè¯´æ˜ï¼ˆä¸€ç›´æ˜¾ç¤ºï¼Œä¸æ˜¯å¼¹çª—ï¼‰ -->
          <div class="game-instructions">
            <h4>ğŸ® è¿è¿çœ‹æ¸¸æˆè¯´æ˜</h4>
            <p><strong>æ¸¸æˆç›®æ ‡ï¼š</strong>åœ¨é™å®šæ—¶é—´å†…ï¼Œæ¶ˆé™¤æ‰€æœ‰æˆå¯¹çš„ç›¸åŒé£Ÿç‰©å›¾æ¡ˆã€‚</p>
            <p><strong>è¿çº¿è§„åˆ™ï¼š</strong>é€‰ä¸­çš„ä¸¤ä¸ªç›¸åŒå›¾æ¡ˆéœ€ç”¨â‰¤3æ¡ç›´çº¿è¿æ¥ï¼ˆå¯ä»¥è½¬å¼¯ï¼Œä½†ä¸èƒ½ç©¿è¿‡å…¶ä»–å›¾æ¡ˆï¼‰ã€‚</p>
            <p><strong>æ¸¸æˆç‰¹è‰²ï¼š</strong>æ¶ˆé™¤ä¸€å¯¹é£Ÿç‰©æ—¶ï¼Œä¼šå¼¹å‡ºè¯¥é£Ÿç‰©çš„è¥å…»çŸ¥è¯†å°æç¤ºï¼</p>
            <p><strong>æ“ä½œæ–¹å¼ï¼š</strong>ç‚¹å‡»ä¸€ä¸ªå›¾æ¡ˆï¼Œå†ç‚¹å‡»å¦ä¸€ä¸ªç›¸åŒå›¾æ¡ˆï¼Œç¬¦åˆè¿çº¿è§„åˆ™å³æ¶ˆé™¤ã€‚</p>
          </div>

          <div class="game-top-row">
            <span class="game-pill" id="gameLevelText">ç¬¬ 1 å…³ Â· åˆé˜¶</span>
            <span class="game-info">ç‚¹å‡»ä¸¤ä¸ªç›¸åŒé£Ÿç‰©å³å¯æ¶ˆé™¤ Â· æ¯å…³é™å®šæ—¶é—´</span>
            <button class="btn-game" id="gameStartBtn">å¼€å§‹æ¸¸æˆ</button>
            <button class="btn-soft" id="gameRestartBtn">é‡æ–°å¼€å§‹</button>
          </div>

          <div class="game-status-row">
            <span class="badge-soft" id="timerText">â± 60 ç§’</span>
            <span class="badge-soft" id="matchCountText">å·²æ¶ˆé™¤ï¼š0 ç»„</span>
            <span class="badge-soft" id="scoreText">å¾—åˆ†ï¼š0</span>
          </div>

          <div class="game-board" id="gameBoard">
            <!-- æ¸¸æˆæ£‹ç›˜å°†é€šè¿‡JSç”Ÿæˆ -->
          </div>
        </div>
      </section>

    </main>
  </div> <!-- /main-layout -->
</div>   <!-- /app-wrapper -->

<!-- é£Ÿç‰©çŸ¥è¯†æç¤º -->
<div class="food-tip-toast" id="foodTipToast">
  <span class="food-icon" id="tipFoodIcon">ğŸ</span>
  <span class="tip-content" id="tipContent">è‹¹æœå¯Œå«ç»´ç”Ÿç´ Cå’Œè†³é£Ÿçº¤ç»´</span>
</div>

<script>
(function () {
  'use strict';

  /* ===================== DOM å¼•ç”¨ ===================== */
  const welcomeOverlay = document.getElementById('welcomeOverlay');
  const mainLayout = document.getElementById('mainLayout');
  const startBtn = document.getElementById('welcomeStartBtn');
  const nameInput = document.getElementById('welcomeNameInput');
  const navLogout = document.getElementById('navLogout');
  const sideUserLine = document.getElementById('sideUserLine');
  
  // é£Ÿç‰©æŸ¥è¯¢ç›¸å…³
  const foodInput = document.getElementById('foodInput');
  const searchBtn = document.getElementById('searchBtn');
  const foodChips = document.querySelectorAll('.food-chip');
  const foodResultArea = document.getElementById('foodResultArea');
  const foodDetail = document.getElementById('foodDetail');
  const emptyHint = document.getElementById('emptyHint');
  
  // ç»Ÿè®¡ç›¸å…³
  const statSearchCount = document.getElementById('statSearchCount');
  const statAvgCal = document.getElementById('statAvgCal');
  const statHealthyCount = document.getElementById('statHealthyCount');
  const statWarningCount = document.getElementById('statWarningCount');
  const topFoodsList = document.getElementById('topFoodsList');
  
  // æ’è¡Œæ¦œç›¸å…³
  const foodLeaderboard = document.getElementById('foodLeaderboard');
  const gameLeaderboard = document.getElementById('gameLeaderboard');
  
  // æ¸¸æˆç›¸å…³
  const gameStartBtn = document.getElementById('gameStartBtn');
  const gameRestartBtn = document.getElementById('gameRestartBtn');
  const gameLevelText = document.getElementById('gameLevelText');
  const timerText = document.getElementById('timerText');
  const matchCountText = document.getElementById('matchCountText');
  const scoreText = document.getElementById('scoreText');
  const gameBoard = document.getElementById('gameBoard');
  
  // é£Ÿç‰©æç¤º
  const foodTipToast = document.getElementById('foodTipToast');
  const tipFoodIcon = document.getElementById('tipFoodIcon');
  const tipContent = document.getElementById('tipContent');
  
  // å¯¼èˆªç›¸å…³
  const navBtns = document.querySelectorAll('.nav-btn');
  const sections = document.querySelectorAll('.section');
  const contentTitle = document.getElementById('contentTitle');
  const contentTitleText = document.getElementById('contentTitleText');
  const contentSubtitle = document.getElementById('contentSubtitle');
  
  /* ===================== ç”¨æˆ·æ•°æ® ===================== */
  let user = {
    name: '',
    searches: [], // é£Ÿç‰©æŸ¥è¯¢è®°å½•
    gameRecords: [] // æ¸¸æˆè®°å½•
  };
  
  /* ===================== é£Ÿç‰©æ•°æ®åº“ ===================== */
  const FOOD_DATABASE = {
    'è‹¹æœ': {
      icon: 'ğŸ',
      name: 'è‹¹æœ',
      calories: 52,
      protein: 0.3,
      fat: 0.2,
      carbs: 14,
      level: 'healthy',
      tip: 'å¯Œå«ç»´ç”Ÿç´ Cå’Œè†³é£Ÿçº¤ç»´ï¼Œå¯ä½œä¸ºåŠ é¤æˆ–æ—©é¤é…é¤ã€‚',
      gameTip: 'æ°´æœæ›¿ä»£å«ç³–é›¶é£Ÿï¼Œå¯ä»¥åœ¨ä¿è¯å£æ„Ÿçš„åŒæ—¶å‡å°‘æ·»åŠ ç³–æ‘„å…¥ã€‚',
      recipes: [
        'è‹¹æœ + åŸå‘³é…¸å¥¶ + ç‡•éº¦ï¼Œåšæˆé…¸å¥¶æ°´æœç¢—ã€‚',
        'åˆ‡ç‰‡è‹¹æœ + ä¸€å°æŠŠåšæœï¼Œä½œä¸ºä¸‹åˆå°ç‚¹å¿ƒã€‚'
      ]
    },
    'ç±³é¥­': {
      icon: 'ğŸš',
      name: 'ç™½ç±³é¥­',
      calories: 130,
      protein: 2.4,
      fat: 0.3,
      carbs: 28,
      level: 'moderate',
      tip: 'æ§åˆ¶ä»½é‡ï¼Œå¹¶æ­é…è¶³å¤Ÿè”¬èœä¸è›‹ç™½è´¨ï¼Œå¯ä»¥æˆä¸ºå‡è¡¡ä¸€é¤ã€‚',
      gameTip: 'ç™½ç±³é¥­æœ¬èº«ä¸ç­‰äºã€Œä¸å¥åº·ã€ï¼Œå…³é”®æ˜¯ä»½é‡å’Œæ­é…æ˜¯å¦å‡è¡¡ã€‚',
      recipes: [
        'ä¸€ç¢—ç±³é¥­ + ä¸€ä»½è”¬èœ + ä¸€ä»½ç˜¦è‚‰æˆ–è±†è…ï¼Œç»„æˆç®€å•ã€Œå‡è¡¡é¥­ç¢—ã€ã€‚',
        'ç”¨ç³™ç±³éƒ¨åˆ†æ›¿ä»£ç™½ç±³ï¼Œå¯å¢åŠ è†³é£Ÿçº¤ç»´æ‘„å…¥ã€‚'
      ]
    },
    'ç‰›å¥¶': {
      icon: 'ğŸ¥›',
      name: 'ç‰›å¥¶',
      calories: 60,
      protein: 3.2,
      fat: 3.3,
      carbs: 4.8,
      level: 'healthy',
      tip: 'æä¾›ä¼˜è´¨è›‹ç™½å’Œé’™ï¼Œé€‰æ‹©ä½è„‚æˆ–è„±è„‚ç‰ˆæœ¬å¯ä»¥å‡å°‘é¥±å’Œè„‚è‚ªæ‘„å…¥ã€‚',
      gameTip: 'é’™å’Œè›‹ç™½è´¨æœ‰åŠ©äºéª¨éª¼å’Œè‚Œè‚‰å¥åº·ï¼Œæ³¨æ„é€‰æ‹©å«ç³–é‡è¾ƒä½çš„ç‰ˆæœ¬ã€‚',
      recipes: [
        'æ—©é¤ï¼šç‰›å¥¶ + å…¨éº¦é¢åŒ… + æ°´æœã€‚',
        'ç”¨ç‰›å¥¶ä»£æ›¿å«ç³–å¥¶èŒ¶ï¼Œå¯å‡å°‘ä¸å°‘é¢å¤–ç³–åˆ†ã€‚'
      ]
    },
    'é¸¡èƒ¸è‚‰': {
      icon: 'ğŸ—',
      name: 'é¸¡èƒ¸è‚‰',
      calories: 120,
      protein: 22,
      fat: 3,
      carbs: 0,
      level: 'healthy',
      tip: 'é«˜è›‹ç™½ã€ä½è„‚è‚ªï¼Œæ˜¯å¸¸è§çš„å¥èº«å‹å¥½å‹ä¸»èœã€‚',
      gameTip: 'ä¼˜å…ˆé€‰æ‹©å°‘æ²¹çš„çƒ¹é¥ªæ–¹å¼ï¼Œå¯ä»¥åœ¨ä¿è¯è›‹ç™½è´¨æ‘„å…¥çš„åŒæ—¶æ§åˆ¶æ€»çƒ­é‡ã€‚',
      recipes: [
        'ç…æˆ–çƒ¤é¸¡èƒ¸è‚‰ + è”¬èœæ²™æ‹‰ï¼Œä½œä¸ºå‡è„‚é¤ã€‚',
        'é¸¡èƒ¸è‚‰åˆ‡ä¸ä¸è”¬èœåŒç‚’ï¼Œé…å°‘é‡ç±³é¥­ã€‚'
      ]
    },
    'èƒ¡èåœ': {
      icon: 'ğŸ¥•',
      name: 'èƒ¡èåœ',
      calories: 41,
      protein: 0.9,
      fat: 0.2,
      carbs: 10,
      level: 'healthy',
      tip: 'å«æœ‰Î²-èƒ¡èåœç´ ï¼Œæœ‰åŠ©äºç»´æŒæ­£å¸¸è§†åŠ›å’Œçš®è‚¤å¥åº·ã€‚',
      gameTip: 'æ©™è‰²è”¬èœé€šå¸¸å¯Œå«ç»´ç”Ÿç´  A å‰ä½“ï¼Œæœ‰åŠ©äºè§†åŠ›ä¸çš®è‚¤å¥åº·ã€‚',
      recipes: [
        'èƒ¡èåœç‚’è¥¿å…°èŠ±ï¼Œä½œä¸ºé…èœã€‚',
        'å°†èƒ¡èåœåˆ‡æ¡ï¼Œæ­é…é…¸å¥¶è˜¸é…±å½“å°é›¶é£Ÿã€‚'
      ]
    },
    'å¯ä¹': {
      icon: 'ğŸ¥¤',
      name: 'å«ç³–é¥®æ–™ï¼ˆå¯ä¹ï¼‰',
      calories: 42,
      protein: 0,
      fat: 0,
      carbs: 11,
      level: 'warning',
      tip: 'å‡ ä¹åªæä¾›ç³–ä¸çƒ­é‡ï¼Œå»ºè®®å‡å°‘é¢‘ç‡æˆ–æ¢æˆæ— ç³–/ç™½æ°´/èŒ¶é¥®ã€‚',
      gameTip: 'å«ç³–é¥®æ–™å¾ˆå®¹æ˜“åœ¨ä¸çŸ¥ä¸è§‰ä¸­æŠ¬é«˜ä¸€å¤©çš„æ€»çƒ­é‡å’Œç³–æ‘„å…¥ã€‚',
      recipes: [
        'å°è¯•æ°”æ³¡æ°´ + æŸ æª¬ç‰‡ï¼Œä½œä¸ºæ›¿ä»£ã€‚',
        'ç”¨å†·æ³¡èŒ¶ä»£æ›¿å«ç³–é¥®æ–™ã€‚'
      ]
    },
    'é¸¡è›‹': {
      icon: 'ğŸ¥š',
      name: 'é¸¡è›‹',
      calories: 155,
      protein: 13,
      fat: 11,
      carbs: 1.1,
      level: 'healthy',
      tip: 'ä¼˜è´¨è›‹ç™½è´¨æ¥æºï¼Œå«æœ‰å¤šç§ç»´ç”Ÿç´ å’ŒçŸ¿ç‰©è´¨ã€‚',
      gameTip: 'é¸¡è›‹æ˜¯æ€§ä»·æ¯”æé«˜çš„è›‹ç™½è´¨æ¥æºï¼Œå»ºè®®æ¯å¤©åƒ1-2ä¸ªã€‚',
      recipes: [
        'æ°´ç…®è›‹æ˜¯æœ€å¥åº·çš„åƒæ³•ã€‚',
        'è’¸è›‹ç¾¹å£æ„Ÿå«©æ»‘ï¼Œé€‚åˆè€äººå°å­©ã€‚'
      ]
    },
    'è¥¿å…°èŠ±': {
      icon: 'ğŸ¥¦',
      name: 'è¥¿å…°èŠ±',
      calories: 34,
      protein: 2.8,
      fat: 0.4,
      carbs: 7,
      level: 'healthy',
      tip: 'å¯Œå«ç»´ç”Ÿç´ Cã€Kå’Œè†³é£Ÿçº¤ç»´ï¼Œæ˜¯è¶…çº§è”¬èœä¹‹ä¸€ã€‚',
      gameTip: 'æ·±ç»¿è‰²è”¬èœè¥å…»ä»·å€¼é«˜ï¼Œå»ºè®®æ¯å¤©éƒ½è¦åƒä¸€äº›ã€‚',
      recipes: [
        'æ¸…ç‚’è¥¿å…°èŠ±ï¼Œä¿ç•™æœ€å¤šè¥å…»ã€‚',
        'è¥¿å…°èŠ±ç‚’è™¾ä»ï¼Œé«˜è›‹ç™½ä½è„‚ã€‚'
      ]
    }
  };
  
  /* ===================== æ•°æ®æŒä¹…åŒ– ===================== */
  function saveUserData() {
    localStorage.setItem('healthFoodHelper_user', JSON.stringify(user));
  }
  
  function loadUserData() {
    const saved = localStorage.getItem('healthFoodHelper_user');
    if (saved) {
      user = JSON.parse(saved);
      if (user.name && sideUserLine) {
        sideUserLine.innerHTML = `<strong>${user.name}</strong>`;
      }
    }
  }
  
  /* ===================== æ¬¢è¿é¡µé€»è¾‘ ===================== */
  if (startBtn && welcomeOverlay && mainLayout) {
    startBtn.addEventListener('click', () => {
      const name = nameInput.value.trim();
      if (!name) {
        showFoodTip('è¯·å…ˆè¾“å…¥ä¸€ä¸ªæ˜µç§°æˆ–å­¦å·~', 'âš ï¸');
        if (nameInput) nameInput.focus();
        return;
      }
      user.name = name;
      if (sideUserLine) {
        sideUserLine.innerHTML = `<strong>${name}</strong>`;
      }
      welcomeOverlay.style.display = 'none';
      mainLayout.style.opacity = '1';
      mainLayout.style.pointerEvents = 'auto';
      saveUserData();
    });
  }
  
  if (navLogout && welcomeOverlay && mainLayout) {
    navLogout.addEventListener('click', () => {
      welcomeOverlay.style.display = 'flex';
      mainLayout.style.opacity = '0.25';
      mainLayout.style.pointerEvents = 'none';
    });
  }
  
  /* ===================== å¯¼èˆªåˆ‡æ¢ ===================== */
  function showSection(sectionId) {
    // æ›´æ–°å¯¼èˆªæŒ‰é’®çŠ¶æ€
    navBtns.forEach(btn => {
      btn.classList.toggle('active', btn.dataset.target === sectionId);
    });
    
    // æ˜¾ç¤ºå¯¹åº”çš„section
    sections.forEach(section => {
      section.classList.toggle('active', section.id === sectionId);
    });
    
    // æ›´æ–°æ ‡é¢˜
    updateContentHeader(sectionId);
    
    // å¦‚æœæ˜¯æ’è¡Œæ¦œé¡µé¢ï¼Œæ›´æ–°æ’è¡Œæ¦œæ•°æ®
    if (sectionId === 'section-leaderboard') {
      updateLeaderboards();
    }
    
    // å¦‚æœæ˜¯ç»Ÿè®¡é¡µé¢ï¼Œæ›´æ–°ç»Ÿè®¡æ•°æ®
    if (sectionId === 'section-stats') {
      updateStats();
    }
  }
  
  function updateContentHeader(sectionId) {
    if (!contentTitle || !contentTitleText || !contentSubtitle) return;
    
    const icon = contentTitle.querySelector('span');
    if (!icon) return;
    
    if (sectionId === 'section-search') {
      icon.textContent = 'ğŸ”';
      contentTitleText.textContent = 'é£Ÿç‰©æŸ¥è¯¢';
      contentSubtitle.textContent = 'è¾“å…¥å¸¸è§é£Ÿç‰©åç§°ï¼ŒæŸ¥çœ‹çƒ­é‡ä¸è¥å…»ç»“æ„ï¼Œå¹¶å¾—åˆ°ç®€å•å¥åº·å»ºè®®ã€‚';
    } else if (sectionId === 'section-stats') {
      icon.textContent = 'ğŸ“Š';
      contentTitleText.textContent = 'æ•°æ®ç»Ÿè®¡';
      contentSubtitle.textContent = 'æ ¹æ®ä½ åœ¨æœ¬æ¬¡ä½¿ç”¨ä¸­çš„é£Ÿç‰©æŸ¥è¯¢ç»“æœï¼Œç»™å‡ºä¸€äº›ç®€å•çš„ç»Ÿè®¡æŒ‡æ ‡';
    } else if (sectionId === 'section-leaderboard') {
      icon.textContent = 'ğŸ†';
      contentTitleText.textContent = 'æ’è¡Œæ¦œ';
      contentSubtitle.textContent = 'æŸ¥çœ‹é£Ÿç‰©æŸ¥è¯¢å’Œæ¸¸æˆæˆç»©çš„æ’å';
    } else if (sectionId === 'section-game') {
      icon.textContent = 'ğŸ®';
      contentTitleText.textContent = 'è¿è¿çœ‹æ¸¸æˆ';
      contentSubtitle.textContent = 'æ¶ˆé™¤ç›¸åŒé£Ÿç‰©å›¾æ¡ˆï¼Œå­¦ä¹ è¥å…»çŸ¥è¯†';
    }
  }
  
  // ä¸ºå¯¼èˆªæŒ‰é’®æ·»åŠ ç‚¹å‡»äº‹ä»¶
  navBtns.forEach(btn => {
    btn.addEventListener('click', () => {
      showSection(btn.dataset.target);
    });
  });
  
  /* ===================== é£Ÿç‰©æŸ¥è¯¢åŠŸèƒ½ ===================== */
  function searchFood(foodName) {
    const food = FOOD_DATABASE[foodName];
    
    if (!food) {
      foodDetail.style.display = 'none';
      emptyHint.style.display = 'block';
      return;
    }
    
    // è®°å½•æŸ¥è¯¢
    user.searches.push({
      food: foodName,
      time: new Date().toLocaleString(),
      calories: food.calories,
      level: food.level
    });
    
    // ä¿å­˜æ•°æ®
    saveUserData();
    
    // æ˜¾ç¤ºç»“æœ
    foodResultArea.innerHTML = `
      <div class="food-summary">
        ${food.icon} ${food.name}
      </div>
    `;
    
    document.getElementById('calorieValue').textContent = food.calories + ' kcal';
    document.getElementById('proteinValue').textContent = food.protein + ' g';
    document.getElementById('fatValue').textContent = food.fat + ' g';
    document.getElementById('carbValue').textContent = food.carbs + ' g';
    document.getElementById('healthTip').textContent = 'ğŸ‘ å»ºè®®ï¼š' + food.tip;
    
    const recipeList = document.getElementById('recipeList');
    recipeList.innerHTML = '';
    food.recipes.forEach(recipe => {
      const li = document.createElement('li');
      li.textContent = recipe;
      recipeList.appendChild(li);
    });
    
    foodDetail.style.display = 'block';
    emptyHint.style.display = 'none';
    
    // æ›´æ–°ç»Ÿè®¡
    updateStats();
  }
  
  // æœç´¢æŒ‰é’®äº‹ä»¶
  if (searchBtn && foodInput) {
    searchBtn.addEventListener('click', () => {
      const val = foodInput.value.trim();
      if (val) searchFood(val);
    });
    
    foodInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        const val = foodInput.value.trim();
        if (val) searchFood(val);
      }
    });
  }
  
  // å¿«é€Ÿæ ‡ç­¾äº‹ä»¶
  foodChips.forEach(chip => {
    chip.addEventListener('click', () => {
      const foodName = chip.dataset.key;
      foodInput.value = foodName;
      searchFood(foodName);
    });
  });
  
  /* ===================== ç»Ÿè®¡åŠŸèƒ½ ===================== */
  function updateStats() {
    if (!user.searches.length) return;
    
    const total = user.searches.length;
    const healthy = user.searches.filter(s => s.level === 'healthy').length;
    const warning = user.searches.filter(s => s.level === 'warning').length;
    const avgCal = Math.round(user.searches.reduce((sum, s) => sum + s.calories, 0) / total);
    
    if (statSearchCount) statSearchCount.textContent = total;
    if (statAvgCal) statAvgCal.textContent = avgCal + ' kcal';
    if (statHealthyCount) statHealthyCount.textContent = healthy;
    if (statWarningCount) statWarningCount.textContent = warning;
    
    // æ›´æ–°é£Ÿç‰©é¢‘ç‡æ’è¡Œæ¦œ
    const foodCounts = {};
    user.searches.forEach(search => {
      foodCounts[search.food] = (foodCounts[search.food] || 0) + 1;
    });
    
    const sortedFoods = Object.entries(foodCounts)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 3);
    
    if (topFoodsList) {
      topFoodsList.innerHTML = '';
      if (sortedFoods.length === 0) {
        const li = document.createElement('li');
        li.className = 'empty-hint';
        li.textContent = 'è¿˜æ²¡æœ‰æ•°æ®ï¼Œå¯ä»¥å…ˆå»ä¸Šæ–¹çš„ã€Œé£Ÿç‰©æŸ¥è¯¢ã€ç©ä¸€ç©ã€‚';
        topFoodsList.appendChild(li);
      } else {
        sortedFoods.forEach(([foodName, count]) => {
          const food = FOOD_DATABASE[foodName];
          const li = document.createElement('li');
          li.innerHTML = `<span>${food ? food.icon : ''} ${foodName}</span><span class="count">${count}æ¬¡</span>`;
          topFoodsList.appendChild(li);
        });
      }
    }
  }
  
  /* ===================== æ’è¡Œæ¦œåŠŸèƒ½ ===================== */
  function updateLeaderboards() {
    // é£Ÿç‰©æŸ¥è¯¢æ’è¡Œæ¦œ
    const foodCounts = {};
    user.searches.forEach(search => {
      foodCounts[search.food] = (foodCounts[search.food] || 0) + 1;
    });
    
    const sortedFoods = Object.entries(foodCounts)
      .sort((a, b) => b[1] - a[1])
      .slice(0, 10);
    
    if (foodLeaderboard) {
      foodLeaderboard.innerHTML = '';
      if (sortedFoods.length === 0) {
        const item = document.createElement('div');
        item.className = 'leaderboard-item';
        item.innerHTML = `
          <div class="item-info">
            <div class="item-name">æš‚æ— æ•°æ®</div>
            <div class="item-details">å¿«å»æŸ¥è¯¢ä¸€äº›é£Ÿç‰©å§</div>
          </div>
        `;
        foodLeaderboard.appendChild(item);
      } else {
        sortedFoods.forEach(([foodName, count], index) => {
          const food = FOOD_DATABASE[foodName];
          const item = document.createElement('div');
          item.className = 'leaderboard-item';
          item.innerHTML = `
            <div class="rank-number ${index < 3 ? 'top-' + (index + 1) : ''}">${index + 1}</div>
            <div class="item-info">
              <div class="item-name">${food ? food.icon : ''} ${foodName}</div>
              <div class="item-details">æŸ¥è¯¢æ¬¡æ•°: ${count}æ¬¡</div>
            </div>
          `;
          foodLeaderboard.appendChild(item);
        });
      }
    }
    
    // æ¸¸æˆè®°å½•æ’è¡Œæ¦œ
    const sortedGames = user.gameRecords
      .sort((a, b) => (a.time || 999) - (b.time || 999))
      .slice(0, 10);
    
    if (gameLeaderboard) {
      gameLeaderboard.innerHTML = '';
      if (sortedGames.length === 0) {
        const item = document.createElement('div');
        item.className = 'leaderboard-item';
        item.innerHTML = `
          <div class="item-info">
            <div class="item-name">æš‚æ— æ•°æ®</div>
            <div class="item-details">å¿«å»ç©è¿è¿çœ‹æ¸¸æˆå§</div>
          </div>
        `;
        gameLeaderboard.appendChild(item);
      } else {
        sortedGames.forEach((record, index) => {
          const item = document.createElement('div');
          item.className = 'leaderboard-item';
          item.innerHTML = `
            <div class="rank-number ${index < 3 ? 'top-' + (index + 1) : ''}">${index + 1}</div>
            <div class="item-info">
              <div class="item-name">ç¬¬${record.level}å…³ Â· ${record.score}åˆ†</div>
              <div class="item-details">ç”¨æ—¶: ${record.time}ç§’ Â· ${record.date}</div>
            </div>
          `;
          gameLeaderboard.appendChild(item);
        });
      }
    }
  }
  
  /* ===================== è¿è¿çœ‹æ¸¸æˆ ===================== */
  class MatchingGame {
    constructor() {
      this.boardSize = 6; // 6x6 æ£‹ç›˜ï¼Œæ›´ç®€å•
      this.levels = [
        { time: 90, pairs: 6 },   // ç¬¬1å…³ï¼š90ç§’ï¼Œ6å¯¹
        { time: 75, pairs: 8 },   // ç¬¬2å…³ï¼š75ç§’ï¼Œ8å¯¹
        { time: 60, pairs: 10 }   // ç¬¬3å…³ï¼š60ç§’ï¼Œ10å¯¹
      ];
      this.currentLevel = 0;
      this.timeLeft = 90;
      this.score = 0;
      this.selectedTiles = [];
      this.matchedPairs = 0;
      this.totalPairs = 6;
      this.gameActive = false;
      this.timer = null;
      this.board = [];
      
      // æ¸¸æˆé£Ÿç‰©å›¾æ ‡ï¼ˆæ¯ç§4ä¸ªï¼Œå³2å¯¹ï¼‰
      this.foodIcons = ['ğŸ', 'ğŸ¥›', 'ğŸš', 'ğŸ—', 'ğŸ¥•', 'ğŸ¥¤', 'ğŸ¥š', 'ğŸ¥¦'];
      this.foodMap = {
        'ğŸ': 'è‹¹æœ',
        'ğŸ¥›': 'ç‰›å¥¶',
        'ğŸš': 'ç±³é¥­',
        'ğŸ—': 'é¸¡èƒ¸è‚‰',
        'ğŸ¥•': 'èƒ¡èåœ',
        'ğŸ¥¤': 'å¯ä¹',
        'ğŸ¥š': 'é¸¡è›‹',
        'ğŸ¥¦': 'è¥¿å…°èŠ±'
      };
    }
    
    // åˆå§‹åŒ–æ¸¸æˆ
    initGame(level = 0) {
      this.currentLevel = level;
      this.timeLeft = this.levels[level].time;
      this.score = 0;
      this.matchedPairs = 0;
      this.totalPairs = this.levels[level].pairs;
      this.selectedTiles = [];
      this.gameActive = true;
      
      this.createBoard();
      this.updateDisplay();
      this.startTimer();
    }
    
    // åˆ›å»ºæ¸¸æˆæ£‹ç›˜
    createBoard() {
      this.board = [];
      const icons = [];
      
      // ä»é£Ÿç‰©å›¾æ ‡ä¸­éšæœºé€‰æ‹©éœ€è¦çš„ç§ç±»
      const selectedIcons = [...this.foodIcons].sort(() => Math.random() - 0.5)
        .slice(0, this.totalPairs);
      
      // æ¯ç§å›¾æ ‡éœ€è¦4ä¸ªï¼ˆ2å¯¹ï¼‰
      selectedIcons.forEach(icon => {
        icons.push(icon, icon, icon, icon);
      });
      
      // éšæœºæ’åˆ—
      for (let i = icons.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [icons[i], icons[j]] = [icons[j], icons[i]];
      }
      
      // å¡«å……6x6æ£‹ç›˜
      for (let i = 0; i < this.boardSize * this.boardSize; i++) {
        this.board.push(i < icons.length ? icons[i] : null);
      }
      
      // æ¸²æŸ“æ£‹ç›˜
      this.renderBoard();
    }
    
    // æ¸²æŸ“æ£‹ç›˜åˆ°DOM
    renderBoard() {
      if (!gameBoard) return;
      
      gameBoard.innerHTML = '';
      gameBoard.style.gridTemplateColumns = `repeat(${this.boardSize}, 1fr)`;
      
      this.board.forEach((icon, index) => {
        const tile = document.createElement('div');
        tile.className = 'tile';
        tile.dataset.index = index;
        
        if (icon) {
          tile.textContent = icon;
          tile.addEventListener('click', () => this.selectTile(index));
        } else {
          tile.style.visibility = 'hidden';
        }
        
        gameBoard.appendChild(tile);
      });
    }
    
    // é€‰æ‹©æ–¹å—
    selectTile(index) {
      if (!this.gameActive || !this.board[index]) return;
      
      const tile = document.querySelector(`.tile[data-index="${index}"]`);
      if (!tile || tile.classList.contains('matched')) return;
      
      // é˜²æ­¢é‡å¤é€‰æ‹©
      if (this.selectedTiles.some(t => t.index === index)) return;
      
      // æ·»åŠ åˆ°é€‰ä¸­åˆ—è¡¨
      this.selectedTiles.push({ index, icon: this.board[index] });
      tile.classList.add('selected');
      
      // å¦‚æœé€‰ä¸­äº†ä¸¤ä¸ªæ–¹å—
      if (this.selectedTiles.length === 2) {
        this.checkMatch();
      }
    }
    
    // çœŸæ­£çš„è¿è¿çœ‹ç®—æ³•
    canConnect(index1, index2) {
      // å¦‚æœä¸¤ä¸ªä½ç½®ç›¸åŒï¼Œä¸èƒ½è¿æ¥
      if (index1 === index2) return false;
      
      // è·å–åæ ‡
      const row1 = Math.floor(index1 / this.boardSize);
      const col1 = index1 % this.boardSize;
      const row2 = Math.floor(index2 / this.boardSize);
      const col2 = index2 % this.boardSize;
      
      // æ£€æŸ¥ç›´çº¿è¿æ¥ï¼ˆ0ä¸ªè½¬å¼¯ï¼‰
      if (this.checkZeroTurn(row1, col1, row2, col2)) return true;
      
      // æ£€æŸ¥ä¸€ä¸ªè½¬å¼¯çš„è¿æ¥
      if (this.checkOneTurn(row1, col1, row2, col2)) return true;
      
      // æ£€æŸ¥ä¸¤ä¸ªè½¬å¼¯çš„è¿æ¥
      if (this.checkTwoTurns(row1, col1, row2, col2)) return true;
      
      return false;
    }
    
    // æ£€æŸ¥ç›´çº¿è¿æ¥ï¼ˆ0ä¸ªè½¬å¼¯ï¼‰
    checkZeroTurn(row1, col1, row2, col2) {
      // åœ¨åŒä¸€è¡Œ
      if (row1 === row2) {
        const minCol = Math.min(col1, col2);
        const maxCol = Math.max(col1, col2);
        for (let col = minCol + 1; col < maxCol; col++) {
          const idx = row1 * this.boardSize + col;
          if (this.board[idx] !== null) return false;
        }
        return true;
      }
      
      // åœ¨åŒä¸€åˆ—
      if (col1 === col2) {
        const minRow = Math.min(row1, row2);
        const maxRow = Math.max(row1, row2);
        for (let row = minRow + 1; row < maxRow; row++) {
          const idx = row * this.boardSize + col1;
          if (this.board[idx] !== null) return false;
        }
        return true;
      }
      
      return false;
    }
    
    // æ£€æŸ¥ä¸€ä¸ªè½¬å¼¯çš„è¿æ¥
    checkOneTurn(row1, col1, row2, col2) {
      // æ£€æŸ¥ä¸¤ä¸ªå¯èƒ½çš„æ‹ç‚¹
      const turnPoints = [
        { row: row1, col: col2 },
        { row: row2, col: col1 }
      ];
      
      for (const turn of turnPoints) {
        const idx1 = row1 * this.boardSize + turn.col;
        const idx2 = turn.row * this.boardSize + col2;
        
        // æ£€æŸ¥æ‹ç‚¹æ˜¯å¦ä¸ºç©º
        if (this.board[idx1] === null && this.board[idx2] === null) {
          // æ£€æŸ¥ç¬¬ä¸€æ®µå’Œç¬¬äºŒæ®µæ˜¯å¦éƒ½æ˜¯ç›´çº¿è¿æ¥
          const firstLeg = this.checkZeroTurn(row1, col1, turn.row, turn.col);
          const secondLeg = this.checkZeroTurn(turn.row, turn.col, row2, col2);
          if (firstLeg && secondLeg) return true;
        }
      }
      
      return false;
    }
    
    // æ£€æŸ¥ä¸¤ä¸ªè½¬å¼¯çš„è¿æ¥
    checkTwoTurns(row1, col1, row2, col2) {
      // éå†æ‰€æœ‰å¯èƒ½çš„ä¸¤ä¸ªæ‹ç‚¹è·¯å¾„
      for (let row = 0; row < this.boardSize; row++) {
        for (let col = 0; col < this.boardSize; col++) {
          // ç¬¬ä¸€ä¸ªæ‹ç‚¹
          const turn1 = { row, col };
          // ç¬¬äºŒä¸ªæ‹ç‚¹ï¼ˆä¸ç›®æ ‡åœ¨åŒä¸€è¡Œæˆ–åŒä¸€åˆ—ï¼‰
          const turn2 = { row: row2, col: col };
          
          const idx1 = turn1.row * this.boardSize + turn1.col;
          const idx2 = turn2.row * this.boardSize + turn2.col;
          
          // æ£€æŸ¥ä¸¤ä¸ªæ‹ç‚¹æ˜¯å¦éƒ½ä¸ºç©º
          if (this.board[idx1] === null && this.board[idx2] === null) {
            // æ£€æŸ¥ä¸‰æ®µæ˜¯å¦éƒ½æ˜¯ç›´çº¿è¿æ¥
            const path1 = this.checkZeroTurn(row1, col1, turn1.row, turn1.col);
            const path2 = this.checkZeroTurn(turn1.row, turn1.col, turn2.row, turn2.col);
            const path3 = this.checkZeroTurn(turn2.row, turn2.col, row2, col2);
            
            if (path1 && path2 && path3) return true;
          }
        }
      }
      
      // å¦ä¸€ç§è·¯å¾„ï¼šå…ˆæ¨ªå‘å†çºµå‘
      for (let col = 0; col < this.boardSize; col++) {
        for (let row = 0; row < this.boardSize; row++) {
          const turn1 = { row: row, col: col };
          const turn2 = { row: row, col: col2 };
          
          const idx1 = turn1.row * this.boardSize + turn1.col;
          const idx2 = turn2.row * this.boardSize + turn2.col;
          
          if (this.board[idx1] === null && this.board[idx2] === null) {
            const path1 = this.checkZeroTurn(row1, col1, turn1.row, turn1.col);
            const path2 = this.checkZeroTurn(turn1.row, turn1.col, turn2.row, turn2.col);
            const path3 = this.checkZeroTurn(turn2.row, turn2.col, row2, col2);
            
            if (path1 && path2 && path3) return true;
          }
        }
      }
      
      return false;
    }
    
    // æ£€æŸ¥æ˜¯å¦åŒ¹é…
    checkMatch() {
      const [tile1, tile2] = this.selectedTiles;
      
      if (tile1.icon === tile2.icon && this.canConnect(tile1.index, tile2.index)) {
        // åŒ¹é…æˆåŠŸ
        this.matchedPairs++;
        this.score += 10 * (this.currentLevel + 1);
        
        // æ ‡è®°ä¸ºå·²åŒ¹é…
        document.querySelectorAll('.tile.selected').forEach(tile => {
          tile.classList.remove('selected');
          tile.classList.add('matched');
        });
        
        // æ¸…ç©ºæ£‹ç›˜æ•°æ®
        this.board[tile1.index] = null;
        this.board[tile2.index] = null;
        
        // æ˜¾ç¤ºé£Ÿç‰©è¥å…»çŸ¥è¯†
        const foodName = this.foodMap[tile1.icon];
        if (foodName && FOOD_DATABASE[foodName]) {
          const food = FOOD_DATABASE[foodName];
          showFoodTip(food.gameTip, food.icon);
        }
        
        // æ£€æŸ¥æ˜¯å¦è¿‡å…³
        if (this.matchedPairs >= this.totalPairs) {
          this.levelComplete();
        }
      } else {
        // åŒ¹é…å¤±è´¥
        setTimeout(() => {
          document.querySelectorAll('.tile.selected').forEach(tile => {
            tile.classList.remove('selected');
          });
        }, 500);
        showFoodTip('è¿™ä¸¤ä¸ªä¸èƒ½è¿åœ¨ä¸€èµ·å“¦~', 'âŒ');
      }
      
      // æ¸…ç©ºé€‰ä¸­åˆ—è¡¨
      this.selectedTiles = [];
      this.updateDisplay();
    }
    
    // å¼€å§‹è®¡æ—¶å™¨
    startTimer() {
      if (this.timer) clearInterval(this.timer);
      
      this.timer = setInterval(() => {
        this.timeLeft--;
        this.updateDisplay();
        
        if (this.timeLeft <= 0) {
          this.gameOver();
        }
      }, 1000);
    }
    
    // æ›´æ–°æ˜¾ç¤º
    updateDisplay() {
      if (gameLevelText) {
        gameLevelText.textContent = `ç¬¬ ${this.currentLevel + 1} å…³ Â· ${this.currentLevel === 0 ? 'åˆé˜¶' : this.currentLevel === 1 ? 'è¿›é˜¶' : 'é«˜é˜¶'}`;
      }
      if (timerText) timerText.textContent = `â± ${this.timeLeft} ç§’`;
      if (matchCountText) matchCountText.textContent = `å·²æ¶ˆé™¤ï¼š${this.matchedPairs} ç»„`;
      if (scoreText) scoreText.textContent = `å¾—åˆ†ï¼š${this.score}`;
    }
    
    // å…³å¡å®Œæˆ
    levelComplete() {
      clearInterval(this.timer);
      this.gameActive = false;
      
      // ä¿å­˜æ¸¸æˆè®°å½•
      user.gameRecords.push({
        level: this.currentLevel + 1,
        time: this.levels[this.currentLevel].time - this.timeLeft,
        score: this.score,
        date: new Date().toLocaleDateString()
      });
      
      // ä¿å­˜åˆ°localStorage
      saveUserData();
      
      // æ›´æ–°æ’è¡Œæ¦œ
      updateLeaderboards();
      
      // æ˜¾ç¤ºå®Œæˆæç¤º
      showFoodTip(`æ­å–œå®Œæˆç¬¬${this.currentLevel + 1}å…³ï¼ç”¨æ—¶${this.levels[this.currentLevel].time - this.timeLeft}ç§’ï¼Œå¾—åˆ†${this.score}`, 'ğŸ‰');
      
      // å¦‚æœæœ‰ä¸‹ä¸€å…³ï¼Œè¯¢é—®æ˜¯å¦ç»§ç»­
      if (this.currentLevel < this.levels.length - 1) {
        setTimeout(() => {
          if (confirm(`ç¬¬${this.currentLevel + 1}å…³å®Œæˆï¼æ˜¯å¦è¿›å…¥ç¬¬${this.currentLevel + 2}å…³ï¼Ÿ`)) {
            this.currentLevel++;
            this.initGame(this.currentLevel);
            showFoodTip(`è¿›å…¥ç¬¬${this.currentLevel + 1}å…³ï¼Œæ—¶é—´æ›´çŸ­ï¼Œéš¾åº¦æ›´é«˜ï¼`, 'ğŸš€');
          }
        }, 1500);
      } else {
        showFoodTip('æ­å–œé€šå…³æ‰€æœ‰å…³å¡ï¼ä½ æ˜¯å¥åº·é¥®é£Ÿè¾¾äººï¼', 'ğŸ†');
      }
    }
    
    // æ¸¸æˆç»“æŸ
    gameOver() {
      clearInterval(this.timer);
      this.gameActive = false;
      showFoodTip('æ—¶é—´åˆ°ï¼æ¸¸æˆç»“æŸï¼Œå†è¯•ä¸€æ¬¡å§~', 'â°');
    }
  }
  
  /* ===================== é£Ÿç‰©çŸ¥è¯†æç¤º ===================== */
  function showFoodTip(text, icon) {
    if (!foodTipToast || !tipFoodIcon || !tipContent) return;
    
    tipFoodIcon.textContent = icon || 'ğŸ’¡';
    tipContent.textContent = text;
    
    // æ˜¾ç¤ºæç¤º
    foodTipToast.classList.add('show');
    
    // 3ç§’åè‡ªåŠ¨éšè—
    setTimeout(() => {
      foodTipToast.classList.remove('show');
    }, 3000);
  }
  
  /* ===================== åˆå§‹åŒ– ===================== */
  // åˆ›å»ºæ¸¸æˆå®ä¾‹
  const game = new MatchingGame();
  
  // æ¸¸æˆæ§åˆ¶æŒ‰é’®
  if (gameStartBtn) {
    gameStartBtn.addEventListener('click', () => {
      game.initGame(0);
      showFoodTip('æ¸¸æˆå¼€å§‹ï¼ç‚¹å‡»ä¸¤ä¸ªç›¸åŒçš„é£Ÿç‰©å›¾æ ‡æ¶ˆé™¤å®ƒä»¬~', 'ğŸ®');
    });
  }
  
  if (gameRestartBtn) {
    gameRestartBtn.addEventListener('click', () => {
      game.initGame(game.currentLevel);
      showFoodTip('æ¸¸æˆé‡æ–°å¼€å§‹ï¼', 'ğŸ”„');
    });
  }
  
  // åŠ è½½ç”¨æˆ·æ•°æ®
  loadUserData();
  
  // å¦‚æœå·²æœ‰ç”¨æˆ·æ•°æ®ï¼Œç›´æ¥è¿›å…¥ä¸»ç•Œé¢
  if (user.name) {
    welcomeOverlay.style.display = 'none';
    mainLayout.style.opacity = '1';
    mainLayout.style.pointerEvents = 'auto';
    if (sideUserLine) {
      sideUserLine.innerHTML = `<strong>${user.name}</strong>`;
    }
  }
  
  // åˆå§‹åŒ–ç»Ÿè®¡å’Œæ’è¡Œæ¦œ
  updateStats();
  updateLeaderboards();
  
  // é»˜è®¤æ˜¾ç¤ºé£Ÿç‰©æŸ¥è¯¢é¡µ
  showSection('section-search');
})();
</script>
</body>
</html>
